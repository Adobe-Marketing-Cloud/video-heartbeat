/*
 * ************************************************************************
 *
 *  ADOBE CONFIDENTIAL
 *  ___________________
 *
 *   (c) Copyright 2014 Adobe Systems Incorporated
 *   All Rights Reserved.
 *
 *  NOTICE:  All information contained herein is, and remains
 *  the property of Adobe Systems Incorporated and its suppliers,
 *  if any.  The intellectual and technical concepts contained
 *  herein are proprietary to Adobe Systems Incorporated and its
 *  suppliers and may be covered by U.S. and Foreign Patents,
 *  patents in process, and are protected by trade secret or copyright law.
 *  Dissemination of this information or reproduction of this material
 *  is strictly forbidden unless prior written permission is obtained
 *  from Adobe Systems Incorporated.
 * ************************************************************************
 */

/*
 * video heartbeats - v1.2.0 - 2014-04-16
 * Copyright (c) 2014 Adobe Systems, Inc. All Rights Reserved.
 */
 (function(t){if(e===void 0)var e={};if(i===void 0)var i={};if(s===void 0)var s={};if(a===void 0)var a={};a.event||(a.event={}),a.model||(a.model={}),a.context||(a.context={}),a.network||(a.network={}),a.clock||(a.clock={}),function(t){"use strict";function e(t,e){var i=(65535&t)+(65535&e),s=(t>>16)+(e>>16)+(i>>16);return s<<16|65535&i}function i(t,e){return t<<e|t>>>32-e}function s(t,s,a,o,n,r){return e(i(e(e(s,t),e(o,r)),n),a)}function a(t,e,i,a,o,n,r){return s(e&i|~e&a,t,e,o,n,r)}function o(t,e,i,a,o,n,r){return s(e&a|i&~a,t,e,o,n,r)}function n(t,e,i,a,o,n,r){return s(e^i^a,t,e,o,n,r)}function r(t,e,i,a,o,n,r){return s(i^(e|~a),t,e,o,n,r)}function h(t,i){t[i>>5]|=128<<i%32,t[(i+64>>>9<<4)+14]=i;var s,h,_,c,l,p=1732584193,d=-271733879,u=-1732584194,v=271733878;for(s=0;t.length>s;s+=16)h=p,_=d,c=u,l=v,p=a(p,d,u,v,t[s],7,-680876936),v=a(v,p,d,u,t[s+1],12,-389564586),u=a(u,v,p,d,t[s+2],17,606105819),d=a(d,u,v,p,t[s+3],22,-1044525330),p=a(p,d,u,v,t[s+4],7,-176418897),v=a(v,p,d,u,t[s+5],12,1200080426),u=a(u,v,p,d,t[s+6],17,-1473231341),d=a(d,u,v,p,t[s+7],22,-45705983),p=a(p,d,u,v,t[s+8],7,1770035416),v=a(v,p,d,u,t[s+9],12,-1958414417),u=a(u,v,p,d,t[s+10],17,-42063),d=a(d,u,v,p,t[s+11],22,-1990404162),p=a(p,d,u,v,t[s+12],7,1804603682),v=a(v,p,d,u,t[s+13],12,-40341101),u=a(u,v,p,d,t[s+14],17,-1502002290),d=a(d,u,v,p,t[s+15],22,1236535329),p=o(p,d,u,v,t[s+1],5,-165796510),v=o(v,p,d,u,t[s+6],9,-1069501632),u=o(u,v,p,d,t[s+11],14,643717713),d=o(d,u,v,p,t[s],20,-373897302),p=o(p,d,u,v,t[s+5],5,-701558691),v=o(v,p,d,u,t[s+10],9,38016083),u=o(u,v,p,d,t[s+15],14,-660478335),d=o(d,u,v,p,t[s+4],20,-405537848),p=o(p,d,u,v,t[s+9],5,568446438),v=o(v,p,d,u,t[s+14],9,-1019803690),u=o(u,v,p,d,t[s+3],14,-187363961),d=o(d,u,v,p,t[s+8],20,1163531501),p=o(p,d,u,v,t[s+13],5,-1444681467),v=o(v,p,d,u,t[s+2],9,-51403784),u=o(u,v,p,d,t[s+7],14,1735328473),d=o(d,u,v,p,t[s+12],20,-1926607734),p=n(p,d,u,v,t[s+5],4,-378558),v=n(v,p,d,u,t[s+8],11,-2022574463),u=n(u,v,p,d,t[s+11],16,1839030562),d=n(d,u,v,p,t[s+14],23,-35309556),p=n(p,d,u,v,t[s+1],4,-1530992060),v=n(v,p,d,u,t[s+4],11,1272893353),u=n(u,v,p,d,t[s+7],16,-155497632),d=n(d,u,v,p,t[s+10],23,-1094730640),p=n(p,d,u,v,t[s+13],4,681279174),v=n(v,p,d,u,t[s],11,-358537222),u=n(u,v,p,d,t[s+3],16,-722521979),d=n(d,u,v,p,t[s+6],23,76029189),p=n(p,d,u,v,t[s+9],4,-640364487),v=n(v,p,d,u,t[s+12],11,-421815835),u=n(u,v,p,d,t[s+15],16,530742520),d=n(d,u,v,p,t[s+2],23,-995338651),p=r(p,d,u,v,t[s],6,-198630844),v=r(v,p,d,u,t[s+7],10,1126891415),u=r(u,v,p,d,t[s+14],15,-1416354905),d=r(d,u,v,p,t[s+5],21,-57434055),p=r(p,d,u,v,t[s+12],6,1700485571),v=r(v,p,d,u,t[s+3],10,-1894986606),u=r(u,v,p,d,t[s+10],15,-1051523),d=r(d,u,v,p,t[s+1],21,-2054922799),p=r(p,d,u,v,t[s+8],6,1873313359),v=r(v,p,d,u,t[s+15],10,-30611744),u=r(u,v,p,d,t[s+6],15,-1560198380),d=r(d,u,v,p,t[s+13],21,1309151649),p=r(p,d,u,v,t[s+4],6,-145523070),v=r(v,p,d,u,t[s+11],10,-1120210379),u=r(u,v,p,d,t[s+2],15,718787259),d=r(d,u,v,p,t[s+9],21,-343485551),p=e(p,h),d=e(d,_),u=e(u,c),v=e(v,l);return[p,d,u,v]}function _(t){var e,i="";for(e=0;32*t.length>e;e+=8)i+=String.fromCharCode(255&t[e>>5]>>>e%32);return i}function c(t){var e,i=[];for(i[(t.length>>2)-1]=void 0,e=0;i.length>e;e+=1)i[e]=0;for(e=0;8*t.length>e;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return i}function l(t){return _(h(c(t),8*t.length))}function p(t,e){var i,s,a=c(t),o=[],n=[];for(o[15]=n[15]=void 0,a.length>16&&(a=h(a,8*t.length)),i=0;16>i;i+=1)o[i]=909522486^a[i],n[i]=1549556828^a[i];return s=h(o.concat(c(e)),512+8*e.length),_(h(n.concat(s),640))}function d(t){var e,i,s="0123456789abcdef",a="";for(i=0;t.length>i;i+=1)e=t.charCodeAt(i),a+=s.charAt(15&e>>>4)+s.charAt(15&e);return a}function u(t){return unescape(encodeURIComponent(t))}function v(t){return l(u(t))}function f(t){return d(v(t))}function m(t,e){return p(u(t),u(e))}function E(t,e){return d(m(t,e))}function I(t,e,i){return e?i?m(e,t):E(e,t):i?v(t):f(t)}"function"==typeof define&&define.amd?define(function(){return I}):t.md5=I}(e),function(t){"use strict";function e(){}var i="js",s="1",a="2",o="0";e.getVersion=function(){return i+"- "+s+"."+a+"."+o},e.getMajor=function(){return s},e.getMinor=function(){return a},e.getMicro=function(){return o},t.Version=e}(i),function(t){"use strict";function e(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}t.extend=e}(s),function(t){"use strict";function e(t,e){var i=[];for(var s in e)e.hasOwnProperty(s)&&"function"==typeof e[s]&&i.push(s);for(var a=0;i.length>a;a++){var o=i[a];t.prototype[o]=e[o]}}t.mixin=e}(s),function(t){"use strict";t.deferrable={executeDeferred:function(){this._deferred&&this._deferred.apply(this,arguments),this._deferred=null}}}(s),function(t){"use strict";t.LOGGING_ENABLED=!1,t.logger={enableLogging:function(t){this._logEnabled=!0,this._logTag=t},disableLogging:function(){this._logEnabled=!1},log:function(e){t.LOGGING_ENABLED&&this._logEnabled&&window.console&&window.console.log&&window.console.log(this._logTag+e)},info:function(e){t.LOGGING_ENABLED&&this._logEnabled&&window.console&&window.console.info&&window.console.info(this._logTag+e)},warn:function(e){t.LOGGING_ENABLED&&this._logEnabled&&window.console&&window.console.warn&&window.console.warn(this._logTag+e)},error:function(e){if(t.LOGGING_ENABLED&&this._logEnabled&&window.console&&window.console.error)throw e=this._logTag+e,window.console.error(e),Error(e)}}}(s),function(t){"use strict";function e(t,e){this.type=t,this.data=e}e.SUCCESS="success",e.ERROR="error",t.Event=e}(s),function(t){"use strict";function e(){this._events={}}e.prototype.addEventListener=function(t,e,i){t&&e&&(i=i||window,this._events[t]=this._events[t]||[],this._events[t].push({cb:e,ctx:i}))},e.prototype.removeEventListener=function(t,e,i){if(t&&e){i=i||window;var s,a,o=!1;for(a in this._events)if(t===a){o=!0;break}if(o){for(s=this._events[a].length-1;s>=0;s--){var n=this._events[a][s];e===n.cb&&i===n.ctx&&this._events[a].splice(s,1)}this._events[a].length||delete this._events[a]}}},e.prototype.dispatchEvent=function(t){if(t.type){var e,i;for(e in this._events)if(this._events.hasOwnProperty(e)&&t.type===e){var s=this._events[e];for(i=0;s.length>i;i++)s[i].cb.call(s[i].ctx,t);break}}},e.prototype.removeAllListeners=function(t){if(t){var e,i;for(i in this._events)if(this._events.hasOwnProperty(i)){for(e=this._events[i].length-1;e>=0;e--){var s=this._events[i][e];s.ctx===t&&this._events[i].splice(e,1)}this._events[i].length||delete this._events[i]}}else this._events={}},t.EventDispatcher=e}(s),function(t){"use strict";function e(){return e.prototype._instance||(e.prototype._instance=new i),e.prototype._instance}var i=t.EventDispatcher;t.NotificationCenter=e}(s),function(t){"use strict";function e(){}function i(t,e){this.url=t||null,this.method=e,this._xmlhttp=null}function s(){s.__super__.constructor.call(this),this._connection=null}var a=t.Event,o=t.EventDispatcher;e.GET="GET",s.STATUS="status",s.RESPONSE="response",s.INSTANCE="instance",t.extend(s,o),s.prototype._createCORSRequest=function(e){if(e._xmlhttp=new window.XMLHttpRequest,!("withCredentials"in e._xmlhttp)&&(e._xmlhttp=window.XDomainRequest!==void 0?new window.XDomainRequest:null,e._xmlhttp)){var i=this;e._xmlhttp.onreadystatechange=function(){if(4===e._xmlhttp.readyState){var o={};o[s.STATUS]=e._xmlhttp.status,e._xmlhttp.status>=200&&400>e._xmlhttp.status?(o[s.RESPONSE]=e._xmlhttp.responseText,o[s.INSTANCE]=i,i.dispatchEvent(new t.Event(a.SUCCESS,o))):i.dispatchEvent(new t.Event(a.ERROR,o))}}}},s.prototype._load_img=function(e){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=e.url;var i={};i[s.STATUS]=200,i[s.RESPONSE]="",i[s.INSTANCE]=this,this.dispatchEvent(new t.Event(a.SUCCESS,i))},s.prototype.close=function(){this.removeAllListeners()},s.prototype.load=function(t){t&&t.method&&t.url&&(this._createCORSRequest(t),t._xmlhttp?(t._xmlhttp.open(t.method,t.url,!0),t._xmlhttp.send()):this._load_img(t))},t.URLRequestMethod=e,t.URLRequest=i,t.URLLoader=s}(s),function(t,e){"use strict";function i(){}i.REPORT="report",i.WHAT="what",i.RESET="reset",i.ACCOUNT="account",i.SC_TRACKING_SERVER="sc_tracking_server",i.TRACKING_SERVER="tracking_server",i.CHECK_STATUS_SERVER="check_status_server",i.JOB_ID="job_id",i.PUBLISHER="publisher",i.STREAM_TYPE="stream_type",i.OVP="ovp",i.SDK="sdk",i.CHANNEL="channel",i.USE_SSL="use_ssl",i.QUIET_MODE="quiet_mode",i.VISITOR_ID="visitor_id",i.ANALYTICS_VISITOR_ID="analytics_visitor_id",i.MARKETING_CLOUD_VISITOR_ID="marketing_cloud_visitor_id",i.NAME="name",i.LENGTH="length",i.PLAYER_NAME="player_name",i.TIMER_INTERVAL="timer_interval",i.TRACKING_INTERVAL="tracking_interval",i.CHECK_STATUS_INTERVAL="check_status_interval",i.TRACK_EXTERNAL_ERRORS="track_external_errors",i.PARENT_NAME="parent_name",i.PARENT_POD="parent_pod",i.PARENT_POD_POSITION="parent_pod_position",i.PARENT_POD_OFFSET="parent_pod_offset",i.CPM="parent_pod_cpm",i.OFFSET="offset",i.SOURCE="source",i.ERROR_ID="error_id",i.BITRATE="bitrate",i.FPS="fps",i.DROPPED_FRAMES="dropped_frames",e.event.EventKeyName=i}(s,a),function(t,e){"use strict";function i(t,e){i.__super__.constructor.call(this,t,e)}var s=t.Event;t.extend(i,s),i.API_CONFIG="api_config",i.API_OPEN_MAIN="api_open_main",i.API_OPEN_AD="api_open_ad",i.API_CLOSE="api_close",i.API_PLAY="api_play",i.API_STOP="api_stop",i.API_CLICK="api_click",i.API_COMPLETE="api_complete",i.API_TRACK_ERROR="api_track_error",i.API_QOS_INFO="api_qos_info",i.API_BITRATE_CHANGE="api_bitrate_change",i.API_BUFFER_START="api_buffer_start",i.API_POD_OFFSET="api_pod_offset",i.API_SESSION_COMPLETE="api_session_complete",e.event.ApiEvent=i}(s,a),function(t,e){"use strict";function i(t,e){i.__super__.constructor.call(this,t,e)}var s=t.Event;t.extend(i,s),i.CONTEXT_DATA_AVAILABLE="context_data_available",e.event.ContextEvent=i}(s,a),function(t,e){"use strict";function i(t,e){i.__super__.constructor.call(this,t,e)}var s=t.Event;t.extend(i,s),i.DATA_REQUEST="data_request",i.DATA_RESPONSE="data_response",i.keys={TRACKING_TIMER_INTERVAL:"tracking_timer_interval",MAIN_VIDEO_PUBLISHER:"main_video_publisher"},e.event.DataEvent=i}(s,a),function(t,e){"use strict";function i(t,e){i.__super__.constructor.call(this,t,e)}var s=t.Event;t.extend(i,s),i.NETWORK_CHECK_STATUS_COMPLETE="network_check_status_complete",e.event.NetworkEvent=i}(s,a),function(t,e){"use strict";function i(t,e){i.__super__.constructor.call(this,t,e)}var s=t.Event;t.extend(i,s),i.CLOCK_TRACKING_TICK="CLOCK_TRACKING_TICK",i.CLOCK_TRACKING_ENABLE="CLOCK_TRACKING_ENABLE",i.CLOCK_TRACKING_DISABLE="CLOCK_TRACKING_DISABLE",i.CLOCK_CHECK_STATUS_TICK="CLOCK_CHECK_STATUS_TICK",i.CLOCK_CHECK_STATUS_ENABLE="CLOCK_CHECK_STATUS_ENABLE",i.CLOCK_CHECK_STATUS_DISABLE="CLOCK_CHECK_STATUS_DISABLE",i.CLOCK_MONITOR_TICK="CLOCK_MONITOR_TICK",i.CLOCK_MONITOR_UPDATE="CLOCK_MONITOR_UPDATE",i.CLOCK_MONITOR_ENABLE="CLOCK_MONITOR_ENABLE",i.CLOCK_MONITOR_DISABLE="CLOCK_MONITOR_DISABLE",e.event.ClockEvent=i}(s,a),function(t,e){"use strict";function i(t,e){this.value=t,this.hint=e}function s(t){this.realm=t,this.data={}}i.HINT_SHORT="short",s.prototype._createAccessor=function(t,e,i){var s=this;return function(){return arguments.length&&(s[t]=arguments[0],s.setField(e,arguments[0],i)),s[t]}},s.prototype.setField=function(t,e,s){this.data[t]=new i(e,s)},e.model.Dao=s,e.model.DaoField=i}(s,a),function(t,e){"use strict";function i(t,e){i.__super__.constructor.call(this,t),this.year=this._createAccessor("_year","year",a.HINT_SHORT),this.month=this._createAccessor("_month","month",a.HINT_SHORT),this.day=this._createAccessor("_day","day",a.HINT_SHORT),this.hour=this._createAccessor("_hour","hour",a.HINT_SHORT),this.minute=this._createAccessor("_minute","minute",a.HINT_SHORT),this.second=this._createAccessor("_second","second",a.HINT_SHORT),this.year(e.getUTCFullYear()),this.month(e.getUTCMonth()+1),this.day(e.getUTCDate()),this.hour(e.getUTCHours()),this.minute(e.getUTCMinutes()),this.second(e.getUTCSeconds())}var s=e.model.Dao,a=e.model.DaoField;t.extend(i,s),e.model.DateDao=i}(s,a),function(t,e){"use strict";function i(){if(i.__super__.constructor.call(this,"asset"),this.cpm=this._createAccessor("_cpm","cpm",null),this.adId=this._createAccessor("_adId","ad_id",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podSecond=this._createAccessor("_podSecond","pod_second",null),this.length=this._createAccessor("_length","length",null),this.cpm(""),this.adId(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podSecond(0),this.length(0),arguments.length&&arguments[0]instanceof i){var t=arguments[0];this.cpm(t.cpm()),this.adId(t.adId()),this.resolver(t.resolver()),this.podId(t.podId()),this.podPosition(t.podPosition()),this.podSecond(t.podSecond()),this.length(t.length())}}var s=e.model.Dao;t.extend(i,s),e.model.AdDao=i}(s,a),function(t,e){"use strict";function i(){if(i.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.duration=this._createAccessor("_duration","duration",null),this.type(""),this.videoId(""),this.publisher(""),this.adData(null),this.duration(0),arguments.length&&arguments[0]instanceof i){var t=arguments[0];this.type(t.type()),this.videoId(t.videoId()),this.publisher(t.publisher()),this.duration(t.duration());var e=t.adData();e&&this.adData(new a(e))}}var s=e.model.Dao,a=e.model.AdDao;t.extend(i,s),i.TYPE_VOD="vod",i.TYPE_LIVE="live",i.TYPE_LINEAR="linear",i.TYPE_AD="ad",e.model.AssetDao=i}(s,a),function(t,e){"use strict";function i(t){i.__super__.constructor.call(this,"event"),this._trackingInterval=t,this.type=this._createAccessor("_type","type",null),this.count=this._createAccessor("_count","count",null),this.totalCount=this._createAccessor("_totalCount","total_count",null),this.duration=this._createAccessor("_duration","duration",null),this.totalDuration=this._createAccessor("_totalDuration","total_duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),this.type(""),this.count(0),this.totalCount(0),this.duration(0),this.totalDuration(0),this.playhead(0),this.id(""),this.source(""),this.prevTs(-1),this.ts((new Date).getTime())}var s=e.model.Dao,a=e.model.DateDao;t.extend(i,s),i.prototype._updateTsAsDate=function(){var t=1e3*this._trackingInterval,e=Math.floor(this._ts/t)*t;this._tsAsDate=new Date(e);var i=new a(this.realm,this._tsAsDate);this.setField("ts_as_date",i,null)},i.prototype.ts=function(){return arguments.length&&(this._ts=arguments[0],this.setField("ts",this._ts,null),this._updateTsAsDate()),this._ts},i.prototype.tsAsDate=function(){if(arguments.length){this._tsAsDate=arguments[0];var t=new a(this.realm,this._tsAsDate);this.setField("ts_as_date",t,null)}return this._tsAsDate},i.EVENT_TYPE_LOAD="load",i.EVENT_TYPE_UNLOAD="unload",i.EVENT_TYPE_START="start",i.EVENT_TYPE_PLAY="play",i.EVENT_TYPE_PAUSE="pause",i.EVENT_TYPE_BUFFER="buffer",i.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",i.EVENT_TYPE_ERROR="error",i.EVENT_TYPE_ACTIVE="active",i.EVENT_TYPE_COMPLETE="complete",e.model.EventDao=i}(s,a),function(t,e){"use strict";function i(){i.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.bitrate(0),this.fps(0),this.droppedFrames(0)}var s=e.model.Dao;t.extend(i,s),e.model.QoSDao=i}(s,a),function(t,e){"use strict";function i(){i.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.reportSuiteId(""),this.trackingServer("")}var s=e.model.Dao;t.extend(i,s),e.model.SiteCatalystDao=i}(s,a),function(t,e){"use strict";function i(){i.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.ovp("unknown"),this.sdk("unknown"),this.channel("unknown"),this.playerName(""),this.libVersion("unknown")}var s=e.model.Dao;t.extend(i,s),e.model.ServiceProviderDao=i}(s,a),function(t,e){"use strict";function i(){i.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),this.sessionId("")}var s=e.model.Dao;t.extend(i,s),e.model.SessionDao=i}(s,a),function(t,e){"use strict";function i(){if(i.__super__.constructor.call(this,"stream"),this.cdn=this._createAccessor("_cdn","cdn",null),this.name=this._createAccessor("_name","name",null),this.cdn(""),this.name(""),arguments.length&&arguments[0]instanceof i){var t=arguments[0];this.cdn(t.cdn()),this.name(t.name())}}var s=e.model.Dao;t.extend(i,s),e.model.StreamDao=i}(s,a),function(t,e){"use strict";function i(){if(i.__super__.constructor.call(this,"user"),this.device=this._createAccessor("_device","device",null),this.country=this._createAccessor("_country","country",null),this.city=this._createAccessor("_city","city",null),this.latitude=this._createAccessor("_latitude","latitude",null),this.longitude=this._createAccessor("_longitude","longitude",null),this.visitorId=this._createAccessor("_visitorId","id",null),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.device(""),this.country(""),this.city(""),this.latitude(""),this.longitude(""),this.visitorId(""),this.analyticsVisitorId(""),this.marketingCloudVisitorId(""),arguments.length&&arguments[0]instanceof i){var t=arguments[0];this.device(t.device()),this.country(t.country()),this.city(t.city()),this.latitude(t.latitude()),this.longitude(t.longitude()),this.visitorId(t.visitorId()),this.analyticsVisitorId(t.analyticsVisitorId()),this.marketingCloudVisitorId(t.marketingCloudVisitorId())}}var s=e.model.Dao;t.extend(i,s),e.model.UserDao=i}(s,a),function(t,e){"use strict";function i(t,e,i,s,a){this.eventData=t,this.assetData=e,this.userData=i,this.streamData=s,this.qosData=a}e.model.ReportEntry=i}(s,a),function(t,e){"use strict";function i(t,e,i){this.siteCatalystData=t,this.serviceProviderData=e,this.sessionData=i,this.reportEntries=[]}var s=e.model.EventDao;i.prototype.addEntry=function(t){this.reportEntries.push(t)},i.prototype.discardPauseEvents=function(){if(this.reportEntries.length)for(var t=this.reportEntries.length-1;t>=0;t--)this.reportEntries[t].eventData.type()===s.EVENT_TYPE_PAUSE&&this.reportEntries.splice(t,1)},e.model.Report=i}(s,a),function(t,e){"use strict";function i(){}i.prototype.serializeReport=function(){},i.prototype.serializeReportEntry=function(){},i.prototype.serializeDao=function(){},i.prototype.serializeNumber=function(){},i.prototype.serializeString=function(){},e.model.SerializerProtocol=i}(s,a),function(t,e){"use strict";function i(){this.enableLogging("[heartbeat::QuerystringSerializer] > ")}var s=t.mixin,a=t.logger,o=e.model.Dao,n=e.model.DaoField,r=e.model.SerializerProtocol,h="l",_="h",c="s";t.extend(i,r),s(i,a),i.prototype._appendSerializedData=function(t){return t?t+"&":""},i.prototype._removeLastCharacter=function(t){return t&&t.length>0&&(t=t.substring(0,t.length-1)),t},i.prototype._processDao=function(t){var e=[];for(var i in t.data)if(t.data.hasOwnProperty(i)){var s=t.data[i],a=s.value,n=s.hint,r=null,h=t.realm;if(null===a||a===void 0)continue;"number"==typeof a?r=this.serializeNumber(i,a,h,n):"string"==typeof a?r=this.serializeString(i,a,h,n):a instanceof o?r=this.serializeDao(a):this.warn("#_processDao() > Unable to serialize DAO. Field: "+i+". Value: "+a+"."),r&&e.push(r)}return e},i.prototype.serializeReport=function(t){for(var e=[],i=t.reportEntries,s=0;i.length>s;s++){var a=this.serializeReportEntry(i[s])+"&";a+=this._appendSerializedData(this.serializeDao(t.siteCatalystData)),a+=this._appendSerializedData(this.serializeDao(t.serviceProviderData)),a+=this._appendSerializedData(this.serializeDao(t.sessionData)),a=this._removeLastCharacter(a),e.push(a)}return e},i.prototype.serializeReportEntry=function(t){var e=this._appendSerializedData(this.serializeDao(t.eventData));return e+=this._appendSerializedData(this.serializeDao(t.assetData)),e+=this._appendSerializedData(this.serializeDao(t.userData)),e+=this._appendSerializedData(this.serializeDao(t.streamData)),e+=this._appendSerializedData(this.serializeDao(t.qosData)),e=this._removeLastCharacter(e)},i.prototype.serializeDao=function(t){for(var e=this._processDao(t),i="",s=0;e.length>s;s++)i+=s==e.length-1?e[s]:e[s]+"&";return i},i.prototype.serializeNumber=function(t,e,i,s){var a=h;return null==e||void 0===e||isNaN(e)?null:(s&&"string"==typeof s&&s===n.HINT_SHORT&&(a=_),a+":"+i+":"+t+"="+Math.floor(e))},i.prototype.serializeString=function(t,e,i){return e?c+":"+i+":"+t+"="+window.encodeURIComponent(e):null},e.model.QuerystringSerializer=i}(s,a),function(t,e){"use strict";function i(t){this.tick=0,this.interval=t,this.isActive=!1}function s(){this._currentTick=0,this._timers={};var t=this;this._clock=setInterval(function(){t._onTick()},1e3*_),this.enableLogging("[heartbeat::TimerManager] > ")}var a=t.logger,o=t.mixin;e.event.ApiEvent;var n=e.event.ClockEvent,r=e.event.EventKeyName,h=t.NotificationCenter,_=1;o(s,a),s.prototype._onTick=function(){this.log("#_onTick() > ------------------- ("+this._currentTick+")"),this._currentTick++;for(var t in this._timers)if(this._timers.hasOwnProperty(t)){var e=this._timers[t];if(e.isActive&&(e.tick++,0===e.tick%e.interval)){var i={};i[r.TIMER_INTERVAL]=e.interval,h().dispatchEvent(new n(n[t],i))}}},s.prototype.isTimerActive=function(t){var e=this._timers[t];return e&&e.isActive},s.prototype.createTimer=function(t,e){this._timers[t]=new i(e)},s.prototype.destroyTimer=function(t){delete this._timers[t]},s.prototype.startTimer=function(t,e){this.log("#startTimer(name="+t+", reset="+e+")");var i=this._timers[t];i&&(i.isActive=!0,e&&(this.log("Resetting timer: "+t),i.tick=0))},s.prototype.stopTimer=function(t,e){this.log("#stopTimer(name="+t+", reset="+e+")");var i=this._timers[t];i&&(i.isActive=!1,e&&(this.log("Resetting timer: "+t),i.tick=0))},s.prototype.destroy=function(){this.log("#destroy()"),clearInterval(this._clock)},new s,e.clock.TimerManager=s}(s,a),function(t,e){"use strict";function i(t,e,i,s,a){this.enableLogging("[media-fork::Timer] > "),this._timerManager=t,this._interval=a,this._tickEventName=e,this._enableEventName=i,this._disableEventName=s,this._timerManager.createTimer(this._tickEventName,this._interval),o().addEventListener(this._enableEventName,this._onTimerEnabled,this),o().addEventListener(this._disableEventName,this._onTimerDisabled,this)}var s=t.logger,a=t.mixin,o=t.NotificationCenter;e.event.ApiEvent;var n=e.clock.TimerManager,r=e.event.EventKeyName;a(i,s),i.prototype._onTimerEnabled=function(t){var e=t.data,i=!1;e&&e.hasOwnProperty(r.RESET)&&(i=e[r.RESET]),this.start(i)},i.prototype._onTimerDisabled=function(t){var e=t.data,i=!1;e&&e.hasOwnProperty(r.RESET)&&(i=e[r.RESET]),this.stop(i)},i.prototype.start=function(t){this.log("#start("+this._tickEventName+")"),this._timerManager.startTimer(this._tickEventName,t)},i.prototype.stop=function(t){this.log("#stop("+this._tickEventName+")"),this._timerManager.stopTimer(this._tickEventName,t)},i.prototype.destroy=function(){o().removeAllListeners(this),this._timerManager.destroyTimer(this._tickEventName)},i.prototype.setInterval=function(t){var e=n().isTimerActive(this._tickEventName);this.stop(!0),this._interval=t,this._timerManager.createTimer(this._tickEventName,this._interval),e&&this.start(!0)},e.clock.Timer=i}(s,a),function(t,e){"use strict";function i(t){i.__super__.constructor.call(this,t,n.CLOCK_MONITOR_TICK,n.CLOCK_MONITOR_ENABLE,n.CLOCK_MONITOR_DISABLE,_),this._offsetTable={},this._activeAsset=null,o().addEventListener(n.CLOCK_MONITOR_TICK,this._onMonitorTick,this),this.enableLogging("[heartbeat::MonitorTimer] > ")}var s=t.mixin,a=t.logger,o=t.NotificationCenter,n=e.event.ClockEvent,r=e.event.EventKeyName,h=e.clock.Timer,_=1;t.extend(i,h),s(i,a),i.prototype._onMonitorTick=function(){if(!this._activeAsset)return this.error("_onMonitorTick() > Monitor timer expects an activeAsset value that is not NULL."),void 0;this._offsetTable.hasOwnProperty(this._activeAsset)||this.error("_onMonitorTick() > Unable to find offset for asset: "+this._activeAsset);var t=this._offsetTable[this._activeAsset];t++,this._offsetTable[this._activeAsset]=t;var e={};e[r.NAME]=this._activeAsset,e[r.OFFSET]=t,o().dispatchEvent(new n(n.CLOCK_MONITOR_UPDATE,e))},i.prototype._onTimerEnabled=function(t){var e=t.data;this._activeAsset=e[r.NAME],this.log("_onTimerEnabled() > Active asset: "+this._activeAsset),this._offsetTable[this._activeAsset]=e[r.OFFSET],i.__super__._onTimerEnabled.call(this,t)},i.prototype._onTimerDisabled=function(t){var e=t.data;this._activeAsset=e[r.NAME],this.log("_onTimerDisabled() > Active asset: "+this._activeAsset),this._offsetTable[this._activeAsset]=e[r.OFFSET],i.__super__._onTimerDisabled.call(this,t)},e.clock.MonitorTimer=i}(s,a),function(t,e){"use strict";function i(t){i.__super__.constructor.call(this,t,h.CLOCK_TRACKING_TICK,h.CLOCK_TRACKING_ENABLE,h.CLOCK_TRACKING_DISABLE,l),o().addEventListener(r.NETWORK_CHECK_STATUS_COMPLETE,this._onCheckStatusComplete,this),o().addEventListener(n.DATA_REQUEST,this._onDataRequest,this),this.enableLogging("[heartbeat::TrackingTimer] > ")}var s=t.mixin,a=t.logger,o=t.NotificationCenter,n=e.event.DataEvent,r=e.event.NetworkEvent,h=e.event.ClockEvent,_=e.event.EventKeyName,c=e.clock.Timer,l=10;t.extend(i,c),s(i,a),i.prototype._onCheckStatusComplete=function(t){var e=t.data[_.TRACKING_INTERVAL];if(this.log("#_onCheckStatusComplete(interval="+e+")"),e){if(e===this._interval)return this.log("#_onCheckStatusComplete() > Interval value not changed."),void 0;this.log("#_onCheckStatusComplete() > Interval changed to: "+e),this.setInterval(e)}else this.warn("#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(l)},i.prototype._onDataRequest=function(t){var e=t.data[_.WHAT];switch(this.log("#_onDataRequest(what="+e+")"),e){case n.keys.TRACKING_TIMER_INTERVAL:var i={};i[_.TIMER_INTERVAL]=this._interval,o().dispatchEvent(new n(n.DATA_RESPONSE,i))}},e.clock.TrackingTimer=i}(s,a),function(t,e){"use strict";function i(t){i.__super__.constructor.call(this,t,c.CLOCK_CHECK_STATUS_TICK,c.CLOCK_CHECK_STATUS_ENABLE,c.CLOCK_CHECK_STATUS_DISABLE,a);var e=this;setTimeout(function(){e._initialCheck()},200),r().addEventListener(h.NETWORK_CHECK_STATUS_COMPLETE,this._onCheckStatusComplete,this),this.enableLogging("[heartbeat::CheckStatusTimer] > ")}var s=600,a=60,o=t.mixin,n=t.logger,r=t.NotificationCenter,h=e.event.NetworkEvent,_=e.event.EventKeyName,c=e.event.ClockEvent,l=e.clock.Timer;t.extend(i,l),o(i,n),i.prototype._initialCheck=function(){this.log("#_initialCheck()");var t={};t[_.TIMER_INTERVAL]=this._interval,r().dispatchEvent(new c(c.CLOCK_CHECK_STATUS_TICK,t))},i.prototype._onCheckStatusComplete=function(t){var e=t.data[_.CHECK_STATUS_INTERVAL];if(this.log("#_onCheckStatusComplete(interval="+e+")"),e){if(e===this._interval)return this.log("#_onCheckStatusComplete() > Interval value not changed."),void 0;e>s?(this.warn("#_onCheckStatusComplete() > Interval value too large: "+e),this.setInterval(s)):(this.log("#_onCheckStatusComplete() > Interval changed to: "+e),this.setInterval(e))}else this.warn("#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(a)},e.clock.CheckStatusTimer=i}(s,a),function(t,e){"use strict";function i(){this._timerManager=new s,this._checkStatusTimer=new a(this._timerManager),this._trackingTimer=new o(this._timerManager),this._monitorTimer=new n(this._timerManager)}var s=e.clock.TimerManager,a=e.clock.CheckStatusTimer,o=e.clock.TrackingTimer,n=e.clock.MonitorTimer;i.prototype.destroy=function(){this._monitorTimer.destroy(),this._trackingTimer.destroy(),this._checkStatusTimer.destroy(),this._timerManager.destroy()},e.clock.Clock=i}(s,a),function(t,e){"use strict";function i(t){this._data=t,this.enableLogging("[heartbeat::SettingsParser] > "),this.log("#SettingsParser(data="+t+")")}var s=t.mixin,a=t.logger,o=t.NotificationCenter,n=e.event.EventKeyName,r=e.event.NetworkEvent;s(i,a),i.prototype.parse=function(){var t,e,i,s;if(!this._data)return this.warn("#SettingsParser() > No data available for parsing."),void 0;if(window.DOMParser){var a=new window.DOMParser;s=a.parseFromString(this._data,"text/xml")}else s=new window.ActiveXObject("Microsoft.XMLDOM"),s.async=!1,s.loadXML(this.data);var h;h=parseInt(s.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10),h&&(t=h),h=parseInt(s.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10),h&&(e=h),h=parseInt(s.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10),h&&(i=1===h);var _={};_[n.TRACKING_INTERVAL]=t,_[n.CHECK_STATUS_INTERVAL]=e,_[n.TRACK_EXTERNAL_ERRORS]=i,this.log("#parse() > Obtained configuration settings: "+JSON.stringify(_)),o().dispatchEvent(new r(r.NETWORK_CHECK_STATUS_COMPLETE,_))},e.network.SettingsParser=i}(s,a),function(t,e){"use strict";function i(t){this._quietMode=!1,this._isConfigured=!1,this._serializer=t,this._trackingServer=null,this._checkStatusServer=null,this._jobId=null,r().addEventListener(d.DATA_RESPONSE,this._onDataResponse,this),r().addEventListener(h.API_CONFIG,this._onApiConfig,this),r().addEventListener(v.CONTEXT_DATA_AVAILABLE,this._onContextDataAvailable,this),r().addEventListener(u.CLOCK_CHECK_STATUS_TICK,this._onClockCheckStatusTick,this),this.enableLogging("[heartbeat::Network] > ")}var s=t.mixin,a=t.deferrable,o=t.logger,n=t.Event,r=t.NotificationCenter,h=e.event.ApiEvent,_=t.URLRequestMethod,c=t.URLRequest,l=t.URLLoader,p=e.event.EventKeyName,d=e.event.DataEvent,u=e.event.ClockEvent,v=e.event.ContextEvent,f=e.network.SettingsParser;s(i,a),s(i,o),i.prototype.destroy=function(){this.log("#destroy()"),r().removeAllListeners(this)},i.prototype._onApiConfig=function(t){var e=t.data;this.log("#_onApiConfig(sb_server="+e[p.TRACKING_SERVER]+", check_status_server="+e[p.CHECK_STATUS_SERVER]+", job_id="+e[p.JOB_ID]+", use_ssl="+e[p.USE_SSL]+", quiet_mode="+e[p.QUIET_MODE]+")"),this._jobId=e[p.JOB_ID],this._trackingServer=this._updateRequestProtocol(e[p.TRACKING_SERVER],e[p.USE_SSL]),this._checkStatusServer=this._updateRequestProtocol(e[p.CHECK_STATUS_SERVER],e[p.USE_SSL]),this._quietMode=e[p.QUIET_MODE],this._isConfigured=!0},i.prototype._onContextDataAvailable=function(t){if(!this._isConfigured)return this.warn("#_onContextDataAvailable() > Unable to send request: not configured."),void 0;for(var e=t.data[p.REPORT],i=this._serializer.serializeReport(e),s=0;i.length>s;s++){var a=i[s],o=this._trackingServer+"/?__job_id="+this._jobId+"&"+a,r=new c(o,_.GET);this.info("_onContextDataAvailable() > "+r.url);var h=new l;(function(t,e){function i(){t.close()}function s(i){e.warn("#_onContextDataAvailable() > Failed to send heartbeat report: "+JSON.stringify(i)),t.close()}e._quietMode||(t.addEventListener(n.SUCCESS,i,this),t.addEventListener(n.ERROR,s,this),t.load(r))})(h,this)}},i.prototype._onClockCheckStatusTick=function(){function t(t){t.data&&new f(t.data.response).parse(),t.data[l.INSTANCE].close()}function e(t){i.warn("_onClockCheckStatusTick() > Failed to obtain the config. settings: "+JSON.stringify(t)),t.data[l.INSTANCE].close()
}if(!this._isConfigured)return this.warn("#_onClockCheckStatusTick() > Unable to send request: not configured."),void 0;var i=this;this._deferred=function(i){var s=i[p.PUBLISHER];if(!s)return this.warn("#_onClockCheckStatusTick() > Publisher is NULL."),void 0;s=s.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase();var a=this._checkStatusServer+s+".xml?r="+(new Date).getTime(),o=new c(a,_.GET),r=new l;r.addEventListener(n.SUCCESS,t,this),r.addEventListener(n.ERROR,e,this),this.log("#_onClockCheckStatusTick() > Get new settings from: "+a),r.load(o)};var s={};s[p.WHAT]=d.keys.MAIN_VIDEO_PUBLISHER,r().dispatchEvent(new d(d.DATA_REQUEST,s))},i.prototype._onDataResponse=function(t){this.executeDeferred(t.data)},i.prototype._updateRequestProtocol=function(t,e){var i=t;return 0===i.indexOf("http://")?i=i.slice(7):0===i.indexOf("https://")&&(i=i.slice(8)),e?"https://"+i:"http://"+i},e.network.Network=i}(s,a),function(t,e){"use strict";function i(){this._totalCount={},this._totalDuration={},this.enableLogging("[heartbeat::Counters] > ")}var s=t.mixin,a=t.logger;s(i,a),i.prototype.getTotalCount=function(t,e,i){var s=e+"."+i+"."+t;return this._totalCount[s]||(this._totalCount[s]=0),this.log("#getTotalCount(key="+s+")"),this._totalCount[s]},i.prototype.incrementTotalCount=function(t,e,i){var s=e+"."+i+"."+t;this._totalCount[s]||(this._totalCount[s]=0),this.log("#incrementTotalCount(key="+s+")"),this._totalCount[s]++},i.prototype.getTotalDuration=function(t,e,i){var s=e+"."+i+"."+t;return this._totalDuration[s]||(this._totalDuration[s]=0),this.log("#getTotalDuration(key="+s+")"),this._totalDuration[s]},i.prototype.increaseTotalDuration=function(t,e,i,s){var a=e+"."+i+"."+t;this._totalDuration[a]||(this._totalDuration[a]=0),this.log("#increaseTotalDuration(key="+a+", amount="+s+")"),this._totalDuration[a]+=s},i.prototype.resetCounters=function(t,e){var i=t+"."+e;this.log("#resetCounters(key="+i+")");var s;for(s in this._totalCount)this._totalCount.hasOwnProperty(s)&&-1!=s.indexOf(i)&&(this._totalCount[s]=0);for(s in this._totalDuration)this._totalDuration.hasOwnProperty(s)&&-1!=s.indexOf(i)&&(this._totalDuration[s]=0)},e.context.Counters=i}(s,a),function(t,e){"use strict";function i(){this._items={},this.enableLogging("[heartbeat::History] > ")}var s=t.mixin,a=t.logger;s(i,a),i.prototype._computeItemKey=function(t){var e=t.assetData,i=e.adData()?e.adData().adId():e.videoId();return i+"."+e.type()+"."+t.eventType},i.prototype.updateWith=function(t){var e=this._computeItemKey(t);this.log("#updateWith(key="+e+")"),this._items[e]=t},i.prototype.getPreviousItemOfSameTypeWith=function(t){var e=this._computeItemKey(t);return this.log("#getPreviousItemOfSameTypeWith(key="+e+")"),this._items[e]},e.context.History=i}(s,a),function(t,e){"use strict";function i(t,e,i,s,r,h){this.timestamp=new Date,this.assetData=new a(t),this.userData=new o(e),this.streamData=new n(i),this.eventType=r,this.qosData=s,this.playhead=h,this.prevItemOfSameType=void 0}var s=e.model.EventDao,a=e.model.AssetDao,o=e.model.UserDao,n=e.model.StreamDao;i.prototype.getAssetId=function(){return this.eventType===s.EVENT_TYPE_ACTIVE?this.assetData.videoId():this.assetData.type()===a.TYPE_AD?this.assetData.adData().adId():this.assetData.videoId()},i.prototype.getEventCount=function(){return 1},e.context.TimelineItem=i}(s,a),function(t,e){"use strict";function i(){this._timeline=[]}i.prototype.getTimelineItems=function(){return this._timeline.slice()},i.prototype.addItem=function(t){for(var e=-1,i=this._timeline.length-1;i>=0&&!(t.timestamp>=this._timeline[i].timestamp);i--)e=i;e>0?this._timeline.splice(i,0,t):this._timeline.push(t)},e.context.Timeline=i}(s,a),function(t,e){"use strict";function i(t){this._context=t,this._lastQuantTimeStamp=null,this.enableLogging("[heartbeat::ReporterHelper] > ")}var s=t.mixin,a=t.logger,o=e.model.Report,n=e.model.EventDao,r=e.model.AssetDao,h=e.model.ReportEntry,_=e.context.TimelineItem;s(i,a),i.prototype._computeQuantTimeStamp=function(t,e,i){var s,a=1e3*i;return s=0===t.getTime()?e.getTime()-a/2:t.getTime()/2+e.getTime()/2,s=Math.floor(s/a)*a,this._lastQuantTimeStamp==s&&(s+=a),this._lastQuantTimeStamp=s,new Date(s)},i.prototype._buildReportEntryForItem=function(t,e,i){var s=this._context._counters,a=t.eventType,o=t.getAssetId(),r=t.assetData.type(),_=a===n.EVENT_TYPE_START?0:t.playhead;s.incrementTotalCount(a,o,r),s.increaseTotalDuration(a,o,r,e);var c=new n(i);c.type(a),c.count(t.getEventCount()),c.duration(e),c.totalCount(s.getTotalCount(a,o,r)),c.totalDuration(s.getTotalDuration(a,o,r)),c.playhead(_),c.ts(t.timestamp.getTime());var l=t.prevItemOfSameType?t.prevItemOfSameType.timestamp.getTime():-1;return c.prevTs(l),new h(c,t.assetData,t.userData,t.streamData,t.qosData)},i.prototype._addPresenceEventToReport=function(t,e,i){if(t.reportEntries.length){var s=new r(this._context._assetData);s.type(this._context._mainAssetType),s.adData(null);var a=new _(s,this._context._userData,this._context._streamData,this._context._qosData,n.EVENT_TYPE_ACTIVE,this._context._offset[this._context._assetData.videoId()]);if(a.prevItemOfSameType=this._context._history.getPreviousItemOfSameTypeWith(a),this._context._history.updateWith(a),t.addEntry(this._buildReportEntryForItem(a,1e3*e,e)),null!=i)for(var o=0;t.reportEntries.length>o;o++)t.reportEntries[o].eventData.tsAsDate(i)}},i.prototype._timeSpanMs=function(t,e){return e.getTime()-t.getTime()},i.prototype.createReportForItem=function(t,e,i){var s=new o(this._context._siteCatalystData,this._context._serviceProviderData,this._context._sessionData);return s.addEntry(this._buildReportEntryForItem(t,0,e)),i&&this._addPresenceEventToReport(s,e,null),s},i.prototype.createReportForQuantum=function(t,e,i){var s,a,h=new o(this._context._siteCatalystData,this._context._serviceProviderData,this._context._sessionData),_=this._context._timeline.getTimelineItems(),c=[],l=null,p=0,d=0;for(p=0;_.length>p;p++){var u=_[p];u.timestamp>t&&e>=u.timestamp&&c.push(u),t>=u.timestamp&&(l=u)}for(this.log("#createReportForQuantum() > -------------TRACK REPORT----------------"),this.log("#createReportForQuantum() > Interval: ["+t.getTime()+" , "+e.getTime()+"]. Tracking interval: "+i),this.log("#createReportForQuantum() > -----------------------------------------"),p=0;_.length>p;p++)this.log("#createReportForQuantum() > ["+_[p].timestamp.getTime()+"] :"+_[p].eventType+" | "+_[p].assetData.type());for(this.log("#createReportForQuantum() > -----------------------------------------"),p=0;c.length>p;p++)this.log("#createReportForQuantum() > ["+c[p].timestamp.getTime()+"] :"+c[p].eventType+" | "+c[p].assetData.type());if(this.log("#createReportForQuantum() > -----------------------------------------"),l&&(l.prevItemOfSameType&&(l.prevItemOfSameType.timestamp=l.timestamp),l.timestamp=new Date(t.getTime()+1),s=l.assetData.adData()?l.assetData.adData().adId():l.assetData.videoId(),l.playhead=this._context._offset[s]),c.length){var v=0;for(l&&(v=l.eventType===n.EVENT_TYPE_START&&l.assetData.type()!==r.TYPE_AD?this._timeSpanMs(l.timestamp,c[0].timestamp):this._timeSpanMs(t,c[0].timestamp),h.addEntry(this._buildReportEntryForItem(l,v,i))),p=0;c.length>p;p++){var f=c[p];if(p==c.length-1)v=this._timeSpanMs(f.timestamp,e);else{var m=c[p+1];v=this._timeSpanMs(f.timestamp,m.timestamp)}var E=!1,I=h.reportEntries;for(d=0;I.length>d;d++)if(a=I[d],f.assetData.type()===a.assetData.type()&&f.eventType===a.eventData.type()&&(E=f.assetData.type()===r.TYPE_AD?a.assetData.adData().adId()===f.assetData.adData().adId():a.assetData.videoId()===f.assetData.videoId()),E){var T=a.eventData,A=a.assetData.type();s=a.assetData.adData()?a.assetData.adData().adId():a.assetData.videoId();var g=this._context._counters;g.incrementTotalCount(T.type(),s,A),g.increaseTotalDuration(T.type(),s,A,v),a.qosData=f.qosData,T.playhead(this._context._offset[s]),T.duration(T.duration()+v),T.totalCount(g.getTotalCount(T.type(),s,A)),T.totalDuration(g.getTotalDuration(T.type(),s,A)),T.ts(f.timestamp.getTime());break}E||(this.log("#createReportForQuantum() > Adding event to report: "+f.eventType),s=f.assetData.adData()?f.assetData.adData().adId():f.assetData.videoId(),f.playhead=this._context._offset[s],h.addEntry(this._buildReportEntryForItem(f,v,i)))}}else l&&h.addEntry(this._buildReportEntryForItem(l,this._timeSpanMs(t,e),i));h.discardPauseEvents();var y=this._computeQuantTimeStamp(t,e,i);for(this._addPresenceEventToReport(h,i,y),this.log("#createReportForQuantum() > Final report ----- START -----"),p=0;h.reportEntries.length>p;p++){a=h.reportEntries[p];var C=a.eventData;s=a.assetData.adData()?a.assetData.adData().adId():a.assetData.videoId(),this.log("#createReportForQuantum() > Final report ["+C.ts()+"/"+C.prevTs()+"] :"+C.type()+" | type="+a.assetData.type()+", name="+s+", duration="+C.duration()+", playhead="+C.playhead())}return this.log("#createReportForQuantum() > Final report ----- END -----"),h},e.context.ReporterHelper=i}(s,a),function(t,e,i){"use strict";function s(){this._isViewingSessionActive=!1,this._isVideoClosed=!1,this._mainAssetType=null,this._blockExternalErrorTracking=!1,this._podOffset=null,this._activeAssetName=null,this._config={streamType:null,publisher:null},this._deferred=null,this._timestampOfLastReport=null,this._offset={},this._reporterHelper=new h(this),this._timeline=new _,this._history=new l,this._sessionData=new p,this._siteCatalystData=new d,this._serviceProviderData=new v,this._assetData=new u,this._userData=new f,this._streamData=new m,this._qosData=new E,this._counters=new I,r().addEventListener(y.API_CONFIG,this._onApiConfig,this),r().addEventListener(y.API_OPEN_MAIN,this._onApiOpenMain,this),r().addEventListener(y.API_OPEN_AD,this._onApiOpenAd,this),r().addEventListener(y.API_CLOSE,this._onApiClose,this),r().addEventListener(y.API_PLAY,this._onApiPlay,this),r().addEventListener(y.API_STOP,this._onApiStop,this),r().addEventListener(y.API_CLICK,this._onApiClick,this),r().addEventListener(y.API_COMPLETE,this._onApiComplete,this),r().addEventListener(y.API_QOS_INFO,this._onApiQoSInfo,this),r().addEventListener(y.API_BITRATE_CHANGE,this._onApiBitrateChange,this),r().addEventListener(y.API_BUFFER_START,this._onApiBufferStart,this),r().addEventListener(y.API_TRACK_ERROR,this._onApiTrackError,this),r().addEventListener(y.API_POD_OFFSET,this._onApiPodOffset,this),r().addEventListener(y.API_SESSION_COMPLETE,this._onApiSessionComplete,this),r().addEventListener(T.CLOCK_MONITOR_UPDATE,this._onClockMonitorUpdate,this),r().addEventListener(T.CLOCK_TRACKING_TICK,this._onClockTrackingTick,this),r().addEventListener(A.NETWORK_CHECK_STATUS_COMPLETE,this._onNetworkCheckStatusComplete,this),r().addEventListener(g.DATA_REQUEST,this._onDataRequest,this),r().addEventListener(g.DATA_RESPONSE,this._onDataResponse,this),this.enableLogging("[heartbeat::Context] > ")}var a=t.mixin,o=t.deferrable,n=t.logger,r=t.NotificationCenter,h=e.context.ReporterHelper,_=e.context.Timeline,c=e.context.TimelineItem,l=e.context.History,p=e.model.SessionDao,d=e.model.SiteCatalystDao,u=e.model.AssetDao,v=e.model.ServiceProviderDao,f=e.model.UserDao,m=e.model.StreamDao,E=e.model.QoSDao,I=e.context.Counters,T=e.event.ClockEvent,A=e.event.NetworkEvent,g=e.event.DataEvent,y=e.event.ApiEvent,C=e.event.ContextEvent,S=e.event.EventKeyName,D=e.model.EventDao,k=e.model.AdDao,R=i.Version,N="player";a(s,o),a(s,n),s.prototype.destroy=function(){this.log("#destroy()"),this._resetInternalState(),r().removeAllListeners(this)},s.prototype._onApiConfig=function(t){var e=t.data;this.log(this,"#_onApiConfig(account="+e[S.ACCOUNT]+", sc_server="+e[S.SC_TRACKING_SERVER]+", sb_server="+e[S.TRACKING_SERVER]+", check_status_server="+e[S.CHECK_STATUS_SERVER]+", job_id="+e[S.JOB_ID]+", publisher="+e[S.PUBLISHER]+", ovp="+e[S.OVP]+", sdk="+e[S.SDK]+", useSSL="+e[S.USE_SSL]+", quietMode: "+e[S.QUIET_MODE]+", channel: "+e[S.CHANNEL]+")"),this._siteCatalystData.reportSuiteId(e[S.ACCOUNT]),this._siteCatalystData.trackingServer(e[S.SC_TRACKING_SERVER]),this._config.publisher=e[S.PUBLISHER],this._serviceProviderData.ovp(e[S.OVP]),this._serviceProviderData.sdk(e[S.SDK]),this._serviceProviderData.channel(e[S.CHANNEL]),this._serviceProviderData.libVersion(R.getVersion()),r().dispatchEvent(new T(T.CLOCK_CHECK_STATUS_ENABLE))},s.prototype._onApiOpenMain=function(t){var e=t.data;this.log("#_onApiOpenMain(name="+e[S.NAME]+", length="+e[S.LENGTH]+", type="+e[S.STREAM_TYPE]+", player_name="+e[S.PLAYER_NAME]+", vid="+e[S.VISITOR_ID]+", aid="+e[S.ANALYTICS_VISITOR_ID]+", mid="+e[S.MARKETING_CLOUD_VISITOR_ID]+")"),this._resetInternalState(),this._activeAssetName=e[S.NAME],this._offset[this._activeAssetName]=0,this._serviceProviderData.playerName(e[S.PLAYER_NAME]),this._userData.visitorId(e[S.VISITOR_ID]),this._userData.analyticsVisitorId(e[S.ANALYTICS_VISITOR_ID]),this._userData.marketingCloudVisitorId(e[S.MARKETING_CLOUD_VISITOR_ID]),this._assetData.videoId(this._activeAssetName),this._assetData.duration(e[S.LENGTH]),this._assetData.type(e[S.STREAM_TYPE]),this._mainAssetType=this._assetData.type(),this._streamData.name(this._activeAssetName),this._generateSessionId(),this._counters.resetCounters(this._activeAssetName,this._mainAssetType);var i={};i[S.RESET]=!0,r().dispatchEvent(new T(T.CLOCK_TRACKING_ENABLE,i)),this._deferred=function(t){var e=t[S.TIMER_INTERVAL],i=new c(this._assetData,this._userData,this._streamData,this._qosData,D.EVENT_TYPE_LOAD,0);i.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(i),this._history.updateWith(i);var s=this._reporterHelper.createReportForItem(i,e,!0),a={};a[S.REPORT]=s,r().dispatchEvent(new C(C.CONTEXT_DATA_AVAILABLE,a))},i={},i[S.WHAT]=g.keys.TRACKING_TIMER_INTERVAL,r().dispatchEvent(new g(g.DATA_REQUEST,i));var s=new c(this._assetData,this._userData,this._streamData,this._qosData,D.EVENT_TYPE_START,0);s.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(s),this._placeItemOnTimeline(s),this._isViewingSessionActive=!0},s.prototype._onApiOpenAd=function(t){if(!this._isViewingSessionActive)return this.warn("#_onApiOpenAd() > No active viewing session."),void 0;this.info("Call detected: onApiOpenAd().");var e=t.data;this.log(this,"#_onApiOpenAd(name="+e[S.NAME]+", length="+e[S.LENGTH]+", player_name="+e[S.PLAYER_NAME]+", parent_name="+e[S.PARENT_NAME]+", pod_pos="+e[S.PARENT_POD_POSITION]+", pod_offset="+e[S.PARENT_POD_OFFSET]+", cpm="+e[S.CPM]+")"),this._assetData.videoId()||this._assetData.videoId(e[S.PARENT_NAME]),this._activeAssetName=e[S.NAME],this._offset[this._activeAssetName]=0;var i=new k;i.adId(this._activeAssetName),i.length(e[S.LENGTH]),i.resolver(e[S.PLAYER_NAME]),i.cpm(e[S.CPM]),i.podId(e[S.PARENT_POD]),i.podSecond(this._podOffset),i.podPosition(e[S.PARENT_POD_POSITION]+""),this._assetData.adData(i),this._assetData.type(u.TYPE_AD),this._counters.resetCounters(this._activeAssetName,u.TYPE_AD);var s=new c(this._assetData,this._userData,this._streamData,this._qosData,D.EVENT_TYPE_START,0);s.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(s),this._placeItemOnTimeline(s);var a=new c(this._assetData,this._userData,this._streamData,this._qosData,D.EVENT_TYPE_PLAY,this._offset[this._activeAssetName]);a.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(a),this._placeItemOnTimeline(a)},s.prototype._onApiClose=function(t){if(!this._isViewingSessionActive)return this.warn("#_onApiClose() > No active viewing session."),void 0;var e=t.data[S.NAME];this.log("#_onApiClose(name="+e+")"),e===this._assetData.videoId()?this._closeMainVideo():this._closeAd()},s.prototype._onApiPlay=function(t){if(!this._isViewingSessionActive)return this.warn("#_onApiPlay() > No active viewing session."),void 0;var e=t.data;if(this.log("#_onApiPlay(name="+e[S.NAME]+", offset="+e[S.OFFSET]+", vid="+e[S.VISITOR_ID]+", aid="+e[S.ANALYTICS_VISITOR_ID]+", mid="+e[S.MARKETING_CLOUD_VISITOR_ID]+")"),e[S.NAME]!=this._assetData.videoId||!this._isVideoClosed){this._userData.visitorId(e[S.VISITOR_ID]),this._userData.analyticsVisitorId(e[S.ANALYTICS_VISITOR_ID]),this._userData.marketingCloudVisitorId(e[S.MARKETING_CLOUD_VISITOR_ID]),this._activeAssetName=e[S.NAME],this._offset[this._activeAssetName]=Math.floor(e[S.OFFSET]),r().dispatchEvent(new T(T.CLOCK_TRACKING_ENABLE));var i=new c(this._assetData,this._userData,this._streamData,this._qosData,D.EVENT_TYPE_PLAY,this._offset[this._activeAssetName]);i.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(i),this._placeItemOnTimeline(i)}},s.prototype._onApiStop=function(t){if(!this._isViewingSessionActive)return this.warn("#_onApiStop() > No active viewing session."),void 0;var e=t.data;this.log("#_onApiStop(name="+e[S.NAME]+", offset="+e[S.OFFSET]+")"),this._activeAssetName=e[S.NAME],this._offset[this._activeAssetName]=Math.floor(e[S.OFFSET]);var i=new c(this._assetData,this._userData,this._streamData,this._qosData,D.EVENT_TYPE_PAUSE,this._offset[this._activeAssetName]);i.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(i),this._placeItemOnTimeline(i),r().dispatchEvent(new T(T.CLOCK_TRACKING_DISABLE))},s.prototype._onApiClick=function(t){if(!this._isViewingSessionActive)return this.warn("#_onApiClick() > No active viewing session."),void 0;var e=t.data;this.log("#_onApiClick(name="+e[S.NAME]+", offset="+e[S.OFFSET]+")")},s.prototype._onApiComplete=function(t){if(!this._isViewingSessionActive)return this.warn("#_onApiComplete() > No active viewing session."),void 0;var e=t.data;this.log("#_onApiComplete(name="+e[S.NAME]+", offset="+e[S.OFFSET]+")")},s.prototype._onApiQoSInfo=function(t){if(!this._isViewingSessionActive)return this.warn("#_onApiQoSInfo() > No active viewing session."),void 0;var e=t.data;this.log("#_onApiQoSInfo(bitrate="+e[S.NAME]+", fps="+e[S.FPS]+", dropped_frames="+e[S.DROPPED_FRAMES]+")"),this._qosData.bitrate(e[S.BITRATE]),this._qosData.fps(e[S.FPS]),this._qosData.droppedFrames(e[S.DROPPED_FRAMES])},s.prototype._onApiBitrateChange=function(t){if(!this._isViewingSessionActive)return this.warn("#_onApiBitrateChange() > No active viewing session."),void 0;var e=t.data;this.log("#_onApiBitrateChange(bitrate="+e[S.NAME]+")"),this._qosData.bitrate(e[S.BITRATE]);var i=new c(this._assetData,this._userData,this._streamData,this._qosData,D.EVENT_TYPE_BITRATE_CHANGE,this._offset[this._activeAssetName]);i.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(i),this._history.updateWith(i),this._deferred=function(t){var e=t[S.TIMER_INTERVAL],s=this._reporterHelper.createReportForItem(i,e,!1),a={};a[S.REPORT]=s,r().dispatchEvent(new C(C.CONTEXT_DATA_AVAILABLE,a))};var s={};s[S.WHAT]=g.keys.TRACKING_TIMER_INTERVAL,r().dispatchEvent(new g(g.DATA_REQUEST,s))},s.prototype._onApiBufferStart=function(){if(!this._isViewingSessionActive)return this.warn("#_onApiBufferStart() > No active viewing session."),void 0;this.log("#_onApiBufferStart()");var t=new c(this._assetData,this._userData,this._streamData,this._qosData,D.EVENT_TYPE_BUFFER,this._offset[this._activeAssetName]);t.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(t),this._placeItemOnTimeline(t)},s.prototype._onApiTrackError=function(t){if(!this._isViewingSessionActive)return this.warn("#_onApiTrackError() > No active viewing session."),void 0;var e=t.data;if(this.log("#_onApiTrackError(source="+e[S.SOURCE]+", err_id="+e[S.ERROR_ID]+", offset="+e[S.OFFSET]+")"),!this._blockExternalErrorTracking||e[S.SOURCE]===N){var i=new c(this._assetData,this._userData,this._streamData,this._qosData,D.EVENT_TYPE_ERROR,Math.floor(e[S.OFFSET]));i.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(i),this._history.updateWith(i),this._deferred=function(t){var s=t[S.TIMER_INTERVAL],a=this._reporterHelper.createReportForItem(i,s,!1),o=a.reportEntries[0];o.eventData.id(e[S.ERROR_ID]),o.eventData.source(e[S.SOURCE]);var n={};n[S.REPORT]=a,r().dispatchEvent(new C(C.CONTEXT_DATA_AVAILABLE,n))};var s={};s[S.WHAT]=g.keys.TRACKING_TIMER_INTERVAL,r().dispatchEvent(new g(g.DATA_REQUEST,s))}},s.prototype._onApiPodOffset=function(t){return this._isViewingSessionActive?(this._podOffset=Math.floor(t.data[S.PARENT_POD_OFFSET]),this.log("#_onApiPodOffset(podOffset="+this._podOffset+")"),void 0):(this.warn("#_onApiPodOffset() > No active viewing session."),void 0)},s.prototype._onApiSessionComplete=function(){if(!this._isViewingSessionActive)return this.warn("#_onApiSessionComplete() > No active viewing session."),void 0;this.log("#_onApiSessionComplete()");var t=new c(this._assetData,this._userData,this._streamData,this._qosData,D.EVENT_TYPE_UNLOAD,0);t.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(t),this._placeItemOnTimeline(t),this._deferred=function(t){var e=t[S.TIMER_INTERVAL],i=this._timestampOfLastReport||new Date(0),s=new Date,a=this._reporterHelper.createReportForQuantum(i,s,e),o={};o[S.REPORT]=a,r().dispatchEvent(new C(C.CONTEXT_DATA_AVAILABLE,o)),this._timestampOfLastReport=s};var e={};e[S.WHAT]=g.keys.TRACKING_TIMER_INTERVAL,r().dispatchEvent(new g(g.DATA_REQUEST,e)),e={},e[S.RESET]=!0,r().dispatchEvent(new T(T.CLOCK_TRACKING_DISABLE,e)),this._isViewingSessionActive=!1},s.prototype._onClockMonitorUpdate=function(t){if(!this._isViewingSessionActive)return this.warn("#_onClockMonitorUpdate() > No active viewing session."),void 0;var e=t.data;this.log("#_onClockMonitorUpdate(name="+e[S.NAME]+", offset="+e[S.OFFSET]+")"),this._activeAssetName=e[S.NAME],this._offset[this._activeAssetName]=Math.floor(t.data[S.OFFSET])},s.prototype._onClockTrackingTick=function(t){if(!this._isViewingSessionActive)return this.warn("#_onClockTrackingTick() > No active viewing session."),void 0;this.log("#_onClockTrackingTick(interval="+t.data[S.TIMER_INTERVAL]+")");var e=t.data[S.TIMER_INTERVAL],i=new Date,s=this._timestampOfLastReport||new Date(0),a=this._reporterHelper.createReportForQuantum(s,i,e),o={};o[S.REPORT]=a,r().dispatchEvent(new C(C.CONTEXT_DATA_AVAILABLE,o)),this._timestampOfLastReport=i},s.prototype._onNetworkCheckStatusComplete=function(t){this.log("#_onNetworkCheckStatusComplete(track_ext_err="+t.data[S.TRACK_EXTERNAL_ERRORS]+")");var e=t.data[S.TRACK_EXTERNAL_ERRORS];null!==e&&(this._blockExternalErrorTracking=e)},s.prototype._onDataRequest=function(t){var e=t.data[S.WHAT];switch(this.log("#_onDataRequest(what="+e+")"),e){case g.keys.MAIN_VIDEO_PUBLISHER:var i={};i[S.PUBLISHER]=this._config.publisher,r().dispatchEvent(new g(g.DATA_RESPONSE,i))}},s.prototype._onDataResponse=function(t){this.log("#_onDataResponse()"),this.executeDeferred(t.data)},s.prototype._resetInternalState=function(){this.log("#_resetInternalState()"),this._isViewingSessionActive=!1,this._isVideoClosed=!1,this._mainAssetType=null,this._blockExternalErrorTracking=!1,this._offset={},this._podOffset=null,this._timestampOfLastReport=null,this._counters=new I,this._history=new l,this._timeline=new _,this._userData=new f,this._streamData=new m,this._qosData=new E,this._sessionData=new p,this._assetData=new u,this._assetData.publisher(this._config.publisher),this._assetData.type(this._config.streamType)},s.prototype._generateSessionId=function(){this._sessionData.sessionId(""+(new Date).getTime()+Math.floor(1e9*Math.random())),this.log("#_generateSessionId() > New session id: "+this._sessionData.sessionId())},s.prototype._placeItemOnTimeline=function(t){this.log("#_placeItemOnTimeline(type="+t.eventType+")"),this._timeline.addItem(t),this._history.updateWith(t)},s.prototype._closeMainVideo=function(){if(this._isVideoClosed)return this.warn("#_closeMainVideo() > The main video content was already closed."),void 0;-1==this._offset[this._assetData.videoId()]&&(this._offset[this._assetData.videoId()]=this._assetData.duration());var t=new c(this._assetData,this._userData,this._streamData,this._qosData,D.EVENT_TYPE_COMPLETE,this._offset[this._assetData.videoId()]);t.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(t),this._placeItemOnTimeline(t),this._isVideoClosed=!0},s.prototype._closeAd=function(){var t=new c(this._assetData,this._userData,this._streamData,this._qosData,D.EVENT_TYPE_COMPLETE,this._offset[this._activeAssetName]);t.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(t),this._placeItemOnTimeline(t),this._assetData.type(this._mainAssetType),this._activeAssetName=this._assetData.videoId(),this._assetData.adData(null)},e.context.Context=s}(s,a,i),function(t,e){"use strict";function i(t){this._appMeasurement=t,this._isConfigured=!1,this._bootstrap(),this.enableLogging("[heartbeat::Heartbeat] > ")}var s="primetime",a=t.mixin,o=t.logger,n=t.NotificationCenter,r=e.event.EventKeyName,h=e.event.ApiEvent,_=e.event.ClockEvent,c=e.clock.Clock,l=e.network.Network,p=e.context.Context,d=e.model.QuerystringSerializer;a(i,o),i.prototype._bootstrap=function(){this._initSubmodules()},i.prototype._initSubmodules=function(){this._context=new p,this._network=new l(new d),this._clock=new c},i.prototype._canTrack=function(){var t=this._isConfigured&&(this._appMeasurement.analyticsVisitorID||this._appMeasurement.marketingCloudVisitorID||this._appMeasurement.visitorID);return t||this.warn("Unable to track! Is configured: "+this._isConfigured+" analyticsVisitorID: "+this._appMeasurement.analyticsVisitorID+" marketingCloudVisitorID: "+this._appMeasurement.marketingCloudVisitorID+" visitorID: "+this._appMeasurement.visitorID),t},i.prototype.setup=function(t){if(!t)throw Error("Configuration object cannot be NULL");var e=t.__primetime?s:t.ovp,i=null!=t.__psdkVersion?t.__psdkVersion:t.sdk,a=t.trackingServer+"/settings/";this.log("#setup() > Applying configuration: {account: "+this._appMeasurement.account+", scTrackingServer: "+this._appMeasurement.trackingServer+", sbTrackingServer: "+t.trackingServer+", jobId: "+t.jobId+", publisher: "+t.publisher+", ovp: "+t.ovp+", sdk: "+t.sdk+", useSSL: "+this._appMeasurement.ssl+", channel:"+t.channel+", quietMode:  "+t.quietMode+", debugLogging: "+t.debugLogging+"}");var o={};o[r.ACCOUNT]=this._appMeasurement.account,o[r.SC_TRACKING_SERVER]=this._appMeasurement.trackingServer,o[r.TRACKING_SERVER]=t.trackingServer,o[r.CHECK_STATUS_SERVER]=a,o[r.JOB_ID]=t.jobId,o[r.PUBLISHER]=t.publisher,o[r.OVP]=e,o[r.SDK]=i,o[r.USE_SSL]=this._appMeasurement.ssl,o[r.CHANNEL]=t.channel,o[r.QUIET_MODE]=t.quietMode,n().dispatchEvent(new h(h.API_CONFIG,o)),this._isConfigured=!0},i.prototype.open=function(t,e,i,s){if(this.log("#open(name="+t+", length="+e+", playerName="+i+")"),this._canTrack()){var a={};a[r.VISITOR_ID]=this._appMeasurement.visitorID,a[r.ANALYTICS_VISITOR_ID]=this._appMeasurement.analyticsVisitorID,a[r.MARKETING_CLOUD_VISITOR_ID]=this._appMeasurement.marketingCloudVisitorID,a[r.NAME]=t,a[r.LENGTH]=e,a[r.STREAM_TYPE]=s,a[r.PLAYER_NAME]=i,n().dispatchEvent(new h(h.API_OPEN_MAIN,a))}},i.prototype.openAd=function(t,e,i,s,a,o,_){if(this.log("#openAd(name="+t+", length="+e+", playerName="+i+", parentName="+s+", parentPod="+a+", parentPodPosition="+o+", cpm="+_+")"),this._canTrack()){var c={};c[r.NAME]=t,c[r.LENGTH]=e,c[r.PLAYER_NAME]=i,c[r.PARENT_NAME]=s,c[r.PARENT_POD]=a,c[r.PARENT_POD_POSITION]=o,c[r.CPM]=_,n().dispatchEvent(new h(h.API_OPEN_AD,c))}},i.prototype.close=function(t){if(this.log("#close(name="+t+")"),this._canTrack()){var e={};e[r.NAME]=t,n().dispatchEvent(new h(h.API_CLOSE,e))}},i.prototype.play=function(t,e,i,s,a){if(this.log("#play(name="+t+", offset="+e+", segmentNum="+i+", segment="+s+", segmentLength="+a+")"),this._canTrack()){var o;o={},o[r.VISITOR_ID]=this._appMeasurement.visitorID,o[r.ANALYTICS_VISITOR_ID]=this._appMeasurement.analyticsVisitorID,o[r.MARKETING_CLOUD_VISITOR_ID]=this._appMeasurement.marketingCloudVisitorID,o[r.NAME]=t,o[r.OFFSET]=e,n().dispatchEvent(new _(_.CLOCK_MONITOR_ENABLE,o)),n().dispatchEvent(new h(h.API_PLAY,o))}},i.prototype.stop=function(t,e){if(this.log("#stop(name="+t+", offset="+e+")"),this._canTrack()){var i;i={},i[r.NAME]=t,i[r.OFFSET]=e,n().dispatchEvent(new _(_.CLOCK_MONITOR_DISABLE,i)),n().dispatchEvent(new h(h.API_STOP,i))}},i.prototype.click=function(t,e){if(this.log("#click(name="+t+", offset="+e+")"),this._canTrack()){var i={};i[r.NAME]=t,i[r.OFFSET]=e,n().dispatchEvent(new h(h.API_CLICK,i))}},i.prototype.complete=function(t,e){if(this.log("#complete(name="+t+", offset="+e+")"),this._canTrack()){var i={};i[r.NAME]=t,i[r.OFFSET]=e,n().dispatchEvent(new h(h.API_COMPLETE,i))}},i.prototype.trackError=function(t,e,i){if(this.log("#trackError(source="+t+", errorId="+e+", offset="+i+")"),this._canTrack()){var s={};s[r.SOURCE]=t,s[r.ERROR_ID]=e,s[r.OFFSET]=i,n().dispatchEvent(new h(h.API_TRACK_ERROR,s))}},i.prototype.updateQoSInfo=function(t,e,i){if(this.log("#updateQoSInfo(bitrate="+t+", fps="+e+", droppedFrames="+i+")"),this._canTrack()){var s={};s[r.BITRATE]=t,s[r.FPS]=e,s[r.DROPPED_FRAMES]=i,n().dispatchEvent(new h(h.API_QOS_INFO,s))}},i.prototype.bitrateChange=function(t){if(this.log("#bitrateChange(bitrate="+t+")"),this._canTrack()){var e={};e[r.BITRATE]=t,n().dispatchEvent(new h(h.API_BITRATE_CHANGE,e))}},i.prototype.bufferStart=function(){this.log("#bufferStart()"),this._canTrack()&&n().dispatchEvent(new h(h.API_BUFFER_START))},i.prototype.adBreakStart=function(t){if(this.log("#adBreakStart(offset="+t+")"),this._canTrack()){var e={};e[r.PARENT_POD_OFFSET]=t,n().dispatchEvent(new h(h.API_POD_OFFSET,e))}},i.prototype.adBreakEnd=function(){if(this.log("#adBreakEnd()"),this._canTrack()){var t={};t[r.PARENT_POD_OFFSET]=null,n().dispatchEvent(new h(h.API_POD_OFFSET,t))}},i.prototype.sessionComplete=function(){this.log("#sessionComplete()"),this._canTrack()&&n().dispatchEvent(new h(h.API_SESSION_COMPLETE))},i.prototype.destroy=function(){this.log("#destroy()"),this._context.destroy(),this._clock.destroy(),this._network.destroy()},e.Heartbeat=i}(s,a),function(t){"use strict";function e(){this.playerName=null,this.name=null,this.position=null}t.AdBreakInfo=e}(i),function(t){"use strict";function e(){this.id=null,this.name=null,this.length=null,this.playhead=null,this.position=null,this.cpm=null}t.AdInfo=e}(i),function(t){"use strict";t.ASSET_TYPE_VOD="vod",t.ASSET_TYPE_LINEAR="linear",t.ASSET_TYPE_LIVE="live"}(i),function(t){"use strict";function e(){this.name=null,this.length=null,this.position=null}t.ChapterInfo=e}(i),function(t){"use strict";function e(t,e,a){this.trackingServer=t,this.jobId=e,this.publisher=a,this.channel=s,this.ovp=i,this.sdk=i,this.debugLogging=!1,this.quietMode=!1,this.__primetime=!1,this.__psdkVersion=null}var i="unknown",s="";t.ConfigData=e}(i),function(t){"use strict";function e(t,e){this.message=t,this.details=e}t.ErrorInfo=e}(i),function(t){"use strict";function e(){}e.prototype.configure=function(){},e.prototype.destroy=function(){},e.prototype.trackVideoLoad=function(){},e.prototype.trackVideoUnload=function(){},e.prototype.trackPlay=function(){},e.prototype.trackPause=function(){},e.prototype.trackBufferStart=function(){},e.prototype.trackBufferComplete=function(){},e.prototype.trackSeekStart=function(){},e.prototype.trackSeekComplete=function(){},e.prototype.trackComplete=function(){},e.prototype.trackChapterStart=function(){},e.prototype.trackChapterComplete=function(){},e.prototype.trackAdBreakStart=function(){},e.prototype.trackAdBreakComplete=function(){},e.prototype.trackAdStart=function(){},e.prototype.trackAdComplete=function(){},e.prototype.trackBitrateChange=function(){},e.prototype.trackVideoPlayerError=function(){},e.prototype.trackApplicationError=function(){},t.HeartbeatProtocol=e}(i),function(t){"use strict";function e(){}e.prototype.getVideoInfo=function(){throw Error("Implementation error: Method must be overridden.")},e.prototype.getAdBreakInfo=function(){throw Error("Implementation error: Method must be overridden.")},e.prototype.getAdInfo=function(){throw Error("Implementation error: Method must be overridden.")},e.prototype.getChapterInfo=function(){throw Error("Implementation error: Method must be overridden.")},e.prototype.getQoSInfo=function(){throw Error("Implementation error: Method must be overridden.")},e.prototype.onError=function(){throw Error("Implementation error: Method must be overridden.")
},t.PlayerDelegate=e}(i),function(t){"use strict";function e(){this.bitrate=null,this.fps=null,this.droppedFrames=null}t.QoSInfo=e}(i),function(t){"use strict";function e(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.streamType=null}t.VideoInfo=e}(i),function(t,e,i,s){"use strict";function a(t,e){if(a.__super__.constructor.call(this),!t)throw Error("The reference to the AppMeasurement object cannot be NULL.");if(this._appMeasurement=t,!e)throw Error("The reference to the PlayerDelegate implementation cannot be NULL.");this._playerDelegate=e,this._heartbeat=new c(t),this._resetInternalState(),this._isDestroyed=!1,this.enableLogging("[video-heartbeat::VideoHeartbeat] > ")}var o=t.extend,n=t.logger,r=t.mixin,h=e.HeartbeatProtocol;e.VideoInfo,e.AdBreakInfo,e.AdInfo,e.QoSInfo;var _=e.ErrorInfo,c=i.Heartbeat,l=s.md5,p="application",d="player",u=1e3,v=300,f="video",m="videoAd",E="ms_s",I="msp_s",T="msa_s",A="mspa_s";o(a,h),r(a,n),a.prototype._startViewingSession=function(){return this._isViewingSessionActive?(this.warn("#_startViewingSession() > Tracking session already in progress."),void 0):(this.log("#_startViewingSession() > Setting the stream type: "+this._videoInfo.streamType),this._openVideo(),this._isViewingSessionActive=!0,void 0)},a.prototype._openVideo=function(){this.log(this,"#_openVideo(id="+this._videoInfo.id+", length="+this._videoInfo.length+", streamType="+this._videoInfo.streamType+", playerName="+this._videoInfo.playerName+")"),this._resetAppMeasurementContextData(),this._appMeasurement.contextData["a.contentType"]=f,this._appMeasurement.contextData["a.media.name"]=this._videoInfo.id,this._appMeasurement.contextData["a.media.length"]=Math.floor(this._videoInfo.length),this._appMeasurement.contextData["a.media.playerName"]=this._videoInfo.playerName,this._appMeasurement.contextData["a.media.channel"]=this._configData.channel,this._appMeasurement.contextData["a.media.view"]=!0,this._appMeasurement.pev3=f,this._appMeasurement.pe=this._configData.__primetime?I:E,this._appMeasurement.track(),this._enqueueHeartbeatCall(this._heartbeat.open,[this._videoInfo.id,this._videoInfo.length,this._videoInfo.playerName,this._videoInfo.streamType])},a.prototype._closeVideo=function(){this.log("#_closeVideo(id="+this._videoInfo.id+")"),this._enqueueHeartbeatCall(this._heartbeat.close,[this._videoInfo.id]),this._isVideoClosed=!0},a.prototype._openAd=function(){this.log("#_openAd(id="+this._adInfo.id+", length="+this._adInfo.length+", playerName="+this._adBreakInfo.playerName+", parentId="+this._videoInfo.id+", podId="+this._adInfo.id+", parentPodPosition="+this._adInfo.position+", cpm="+this._adInfo.cpm+")"),this._resetAppMeasurementContextData(),this._appMeasurement.contextData["a.contentType"]=m,this._appMeasurement.contextData["a.media.name"]=this._videoInfo.id,this._appMeasurement.contextData["a.media.channel"]=this._configData.channel,this._appMeasurement.contextData["a.media.ad.name"]=this._adInfo.id,this._appMeasurement.contextData["a.media.ad.length"]=Math.floor(this._adInfo.length),this._appMeasurement.contextData["a.media.ad.playerName"]=this._adBreakInfo.playerName,this._appMeasurement.contextData["a.media.ad.pod"]=this._podId,this._appMeasurement.contextData["a.media.ad.podPosition"]=Math.floor(this._adInfo.position),this._appMeasurement.contextData["a.media.ad.CPM"]=this._adInfo.cpm,this._appMeasurement.contextData["a.media.ad.view"]=!0,this._appMeasurement.pev3=m,this._appMeasurement.pe=this._configData.__primetime?A:T,this._appMeasurement.track(),this._enqueueHeartbeatCall(this._heartbeat.openAd,[this._adInfo.id,this._adInfo.length,this._adBreakInfo.playerName,this._videoInfo.id,this._podId,this._adInfo.position,this._adInfo.cpm]),this._inAd=!0},a.prototype._closeAd=function(){this.log("#_closeAd(id="+this._adInfo.id+")"),this._enqueueHeartbeatCall(this._heartbeat.close,[this._adInfo.id]),this._inAd=!1,this._adInfo=null},a.prototype._startPlayback=function(){this._inAd?this._startAdPlayback():this._startVideoPlayback()},a.prototype._stopPlayback=function(){this._inAd?this._stopAdPlayback(!1):this._stopVideoPlayback(!1)},a.prototype._startAdPlayback=function(){if(this._inAd&&!this._isAdPlaying&&!this._isSeeking){var t=this._getActiveAssetPlayhead();this.log("#_startAdPlayback(id="+this._adInfo.id+", playhead="+t+")"),this._enqueueHeartbeatCall(this._heartbeat.play,[this._adInfo.id,t]),this._isAdPlaying=!0}},a.prototype._stopAdPlayback=function(t){this._inAd&&this._isAdPlaying&&(t?this._adInfo.playhead=this._adInfo.length:this._adInfo=this._playerDelegate.getAdInfo(),this.log("#_stopAdPlayback(id="+this._adInfo.id+", playhead="+this._adInfo.playhead+")"),this._enqueueHeartbeatCall(this._heartbeat.stop,[this._adInfo.id,this._adInfo.playhead]),this._isAdPlaying=!1)},a.prototype._startVideoPlayback=function(){if(!this._isVideoClosed&&!this._isVideoPlaying&&!this._isSeeking){var t=this._getActiveAssetPlayhead();this.log("#_startVideoPlayback(id="+this._videoInfo.id+", playhead="+t+")"),this._enqueueHeartbeatCall(this._heartbeat.play,[this._videoInfo.id,this._videoInfo.playhead]),this._isVideoPlaying=!0}},a.prototype._stopVideoPlayback=function(t){this._isVideoPlaying&&(t?this._videoInfo.playhead=this._videoInfo.length:this._videoInfo=this._playerDelegate.getVideoInfo(),this.log("#_stopVideoPlayback(id="+this._videoInfo.id+", playhead="+this._videoInfo.playhead+")"),this._enqueueHeartbeatCall(this._heartbeat.stop,[this._videoInfo.id,this._videoInfo.playhead]),this._isVideoPlaying=!1)},a.prototype._closeAllContent=function(){this.log("#_closeAllContent()"),this._inAd&&(this.trackAdComplete(),this.trackAdBreakComplete()),this._closeVideo()},a.prototype._completeViewingSession=function(){this.log("#_completeViewingSession() : Closing a previously open tracking session."),this._stopAdPlayback(!0),this._stopVideoPlayback(!0),this._closeAllContent(),this._enqueueHeartbeatCall(this._heartbeat.sessionComplete),this._isViewingSessionActive=!1},a.prototype._resetInternalState=function(){this.log("#_resetInternalState() : Resetting internal state variables."),this._pollQoSInfoTimer&&clearInterval(this._pollQoSInfoTimer),this._pollQoSInfoTimer=null,this._pollAppMeasurementTimer&&clearInterval(this._pollAppMeasurementTimer),this._pollAppMeasurementTimer=null,this._workQueue=[],this._errorInfo=null,this._videoInfo=null,this._adBreakInfo=null,this._adInfo=null,this._qosInfo=null,this._isViewingSessionActive=!1,this._isVideoPlaying=!1,this._isVideoClosed=!1,this._isSeeking=!1,this._isPaused=!1,this._isAdPlaying=!1,this._inAd=!1,this._inAdBreak=!1,this._podId=null},a.prototype._isVisitorIdAvailable=function(){return this.log("#_isVisitorIdAvailable() > VisitorID values: analyticsVisitorID="+this._appMeasurement.analyticsVisitorID+", marketingCloudVisitorID="+this._appMeasurement.analyticsVisitorID+", visitorID="+this._appMeasurement.visitorID+")"),this._appMeasurement.analyticsVisitorID||this._appMeasurement.marketingCloudVisitorID||this._appMeasurement.visitorID},a.prototype._drainWorkQueue=function(){for(var t=0;this._workQueue.length>t;t++){if(this.log("#_drainWorkQueue() > Dequeuing heartbeat operation."),this._errorInfo)return this.warn("#_drainWorkQueue() > Unable to track: in ERROR state."),void 0;var e=this._workQueue[t];e.fn.apply(this._heartbeat,e.args)}this._workQueue=[]},a.prototype._enqueueHeartbeatCall=function(t,e){if(this._errorInfo)return this.warn("#_enqueueHeartbeatCall() > Unable to track: in ERROR state."),void 0;if(this._isVisitorIdAvailable())t.apply(this._heartbeat,e);else{if(!this._pollAppMeasurementTimer){var i=this;this._pollAppMeasurementTimer=setInterval(function(){i._isVisitorIdAvailable()&&(i._drainWorkQueue(),i._pollAppMeasurementTimer&&clearInterval(i._pollAppMeasurementTimer),i._pollAppMeasurementTimer=null)},v)}this.log("#_enqueueHeartbeatCall() > Enqueuing heartbeat operation."),this._workQueue.push({fn:t,args:e})}},a.prototype._getActiveAssetId=function(){if(this._inAd){if(this._adInfo)return this._adInfo.id;if(this._adInfo=this._playerDelegate.getAdInfo(),this._adInfo)return this._adInfo.id;this._executeErrorCallback("Inconsistent internal state","Unable to obtain valid ad-info.")}else{if(this._videoInfo)return this._videoInfo.id;if(this._videoInfo=this._playerDelegate.getVideoInfo(),this._videoInfo)return this._videoInfo.id;this._executeErrorCallback("Inconsistent internal state","Unable to obtain valid video-info.")}return null},a.prototype._getActiveAssetPlayhead=function(){if(this._inAd){if(this._adInfo=this._playerDelegate.getAdInfo(),this._adInfo)return this._adInfo.playhead;this._executeErrorCallback("Inconsistent internal state","Unable to obtain valid ad-info.")}else{if(this._videoInfo=this._playerDelegate.getVideoInfo(),this._videoInfo)return this._videoInfo.playhead;this._executeErrorCallback("Inconsistent internal state","Unable to obtain valid video-info.")}return 0},a.prototype._executeErrorCallback=function(t,e){this._errorInfo=new _(t,e),this._playerDelegate.onError(this._errorInfo)},a.prototype._updateQoSInfo=function(){this._qosInfo=this._playerDelegate.getQoSInfo(),this._qosInfo?this._enqueueHeartbeatCall(this._heartbeat.updateQoSInfo,[this._qosInfo.bitrate,this._qosInfo.fps,this._qosInfo.droppedFrames]):this.log("#_updateQoSInfo() > QoS info unavailable.")},a.prototype._resetAppMeasurementContextData=function(){delete this._appMeasurement.contextData["a.contentType"],delete this._appMeasurement.contextData["a.media.name"],delete this._appMeasurement.contextData["a.media.length"],delete this._appMeasurement.contextData["a.media.playerName"],delete this._appMeasurement.contextData["a.media.channel"],delete this._appMeasurement.contextData["a.media.view"],delete this._appMeasurement.contextData["a.media.ad.name"],delete this._appMeasurement.contextData["a.media.ad.length"],delete this._appMeasurement.contextData["a.media.ad.playerName"],delete this._appMeasurement.contextData["a.media.ad.pod"],delete this._appMeasurement.contextData["a.media.ad.CPM"],delete this._appMeasurement.contextData["a.media.ad.view"]},a.prototype.configure=function(e){if(!e)throw Error("Configuration object cannot be NULL");this._configData=e,t.LOGGING_ENABLED=!!e.debugLogging,this.log("#config({, trackingServer="+e.trackingServer+", jobId="+e.jobId+", publisher="+e.publisher+", ovp="+e.ovp+", sdk="+e.sdk+", __primetime="+e.__primetime+", __psdkVersion="+e.__psdkVersion+", useSSL="+this._appMeasurement.ssl+", quietMode="+e.quietMode+", channel="+e.channel+", debugLogging="+e.debugLogging+"})"),this._heartbeat.setup(e)},a.prototype.destroy=function(){this._heartbeat.destroy(),this._resetInternalState(),this._isDestroyed=!0},a.prototype.trackVideoLoad=function(){if(this._isDestroyed)return this.warn("#trackVideoLoad() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0;this._resetInternalState(),this.log("#trackVideoLoad() > Querying the player delegate."),this._videoInfo=this._playerDelegate.getVideoInfo(),this.log(this,"#trackVideoLoad(playerName="+this._videoInfo.playerName+", videoId="+this._videoInfo.id+", name="+this._videoInfo.name+", length="+this._videoInfo.length+", playhead="+this._videoInfo.playhead+", streamType="+this._videoInfo.streamType+")"),this._isViewingSessionActive&&this._completeViewingSession(),this._startViewingSession();var t=this;this._pollQoSInfoTimer=setInterval(function(){t._updateQoSInfo.call(t)},u)},a.prototype.trackVideoUnload=function(){return this._isDestroyed?(this.warn("#trackVideoUnload() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackVideoUnload() > Unable to track: in ERROR state."),void 0):(this.log("#trackMainVideoClose() > Tracking a VIDEO_UNLOAD event."),this._completeViewingSession(),clearInterval(this._pollQoSInfoTimer),this._pollQoSInfoTimer=null,void 0):(this.warn("#trackVideoUnload() > Unable to track: no active tracking session."),void 0)},a.prototype.trackPlay=function(){return this._isDestroyed?(this.warn("#trackPlay() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackPlay() > Unable to track: in ERROR state."),void 0):(this.log("#trackPlay() > Tracking a PLAY event."),this._startPlayback(),this._isPaused=!1,void 0):(this.warn("#trackPlay() > Unable to track: no active tracking session."),void 0)},a.prototype.trackPause=function(){return this._isDestroyed?(this.warn("#trackPause() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackStop() > Unable to track: in ERROR state."),void 0):(this.log("#trackPause() > Tracking a PAUSE event."),this._stopPlayback(),this._isPaused=!0,void 0):(this.warn("#trackPause() > Unable to track: no active tracking session."),void 0)},a.prototype.trackBufferStart=function(){return this._isDestroyed?(this.warn("#trackBufferStart() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackBufferStart() > Unable to track: in ERROR state."),void 0):(this.log("#trackBufferStart() > Tracking a BUFFER_START event."),this._stopPlayback(),this._enqueueHeartbeatCall(this._heartbeat.bufferStart),void 0):(this.warn("#trackBufferStart() > Unable to track: no active tracking session."),void 0)},a.prototype.trackBufferComplete=function(){return this._isDestroyed?(this.warn(this,"#trackBufferComplete() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackBufferComplete() > Unable to track: in ERROR state."),void 0):(this.log("#trackBufferComplete() > Tracking a BUFFER_COMPLETE event."),this._startPlayback(),void 0):(this.warn("#trackBufferComplete() > Unable to track: no active tracking session."),void 0)},a.prototype.trackSeekStart=function(){return this._isDestroyed?(this.warn("#trackSeekStart() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackSeekStart() > Unable to track: in ERROR state."),void 0):(this.log("#trackSeekStart() > Tracking a SEEK_START event."),this._stopPlayback(),void 0):(this.warn("#trackSeekStart() > Unable to track: no active tracking session."),void 0)},a.prototype.trackSeekComplete=function(){return this._isDestroyed?(this.warn("#trackSeekComplete() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackSeekComplete() > Unable to track: in ERROR state."),void 0):(this._isSeeking=!1,this._videoInfo=this._playerDelegate.getVideoInfo(),this._adInfo=this._playerDelegate.getAdInfo(),this.log("#trackSeekComplete() > Tracking a SEEK_COMPLETE event (inAd="+this._inAd+")."),this._isViewingSessionActive&&!this._isPaused&&this._startPlayback(),void 0):(this.warn("#trackSeekComplete() > Unable to track: no active tracking session."),void 0)},a.prototype.trackComplete=function(){if(this._isDestroyed)return this.warn("#trackComplete() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0;if(!this._isViewingSessionActive)return this.warn("#trackComplete() > Unable to track: no active tracking session."),void 0;if(this._errorInfo)return this.warn("#trackComplete() > Unable to track: in ERROR state."),void 0;var t=this._videoInfo.id,e=this._videoInfo.length;this.log("#trackComplete() > Tracking a COMPLETE event (asset="+t+", playhead="+e+")."),this._enqueueHeartbeatCall(this._heartbeat.complete,[t,e])},a.prototype.trackChapterStart=function(){throw Error("Not implemented.")},a.prototype.trackChapterComplete=function(){throw Error("Not implemented.")},a.prototype.trackAdBreakStart=function(){return this._isDestroyed?(this.warn("#trackAdBreakStart() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackAdBreakStart() > Unable to track: in ERROR state."),void 0):(this.log("#trackAdBreakStart() > Querying the player delegate."),this._videoInfo=this._playerDelegate.getVideoInfo(),this._adBreakInfo=this._playerDelegate.getAdBreakInfo(),this.log("#trackAdBreakStart(playerName="+this._adBreakInfo.playerName+", name="+this._adBreakInfo.name+", position="+this._adBreakInfo.position+")"),this._podId=l(this._videoInfo.id)+"_"+this._adBreakInfo.position,this._enqueueHeartbeatCall(this._heartbeat.adBreakStart,[this._videoInfo.playhead]),this._stopVideoPlayback(!1),this._inAdBreak=!0,void 0):(this.warn("#trackAdBreakStart() > Unable to track: no active tracking session."),void 0)},a.prototype.trackAdBreakComplete=function(){return this._isDestroyed?(this.warn("#trackAdBreakComplete() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackAdBreakComplete() > Unable to track: in ERROR state."),void 0):(this.log("#trackAdBreakComplete() > Tracking an AD_BREAK_COMPLETE event."),this._enqueueHeartbeatCall(this._heartbeat.adBreakEnd),this._isPaused||this._startVideoPlayback(),this._inAdBreak=!0,this._adBreakInfo=null,void 0):(this.warn("#trackAdBreakComplete() > Unable to track: no active tracking session."),void 0)},a.prototype.trackAdStart=function(){return this._isDestroyed?(this.warn("#trackAdStart() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackAdStart() > Unable to track: in ERROR state."),void 0):(this.log("#trackAdStart() > Querying the player delegate."),this._adInfo=this._playerDelegate.getAdInfo(),this.log("#trackAdStart(adId="+this._adInfo.id+", name="+this._adInfo.name+", length="+this._adInfo.length+", playhead="+this._adInfo.playhead+", position="+this._adInfo.position+", cpm="+this._adInfo.cpm+")"),this._openAd(),this.trackPlay(),this._isAdPlaying=!0,void 0):(this.warn("#trackAdStart() > Unable to track: no active tracking session."),void 0)},a.prototype.trackAdComplete=function(){return this._isDestroyed?(this.warn("#trackAdComplete() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackAdComplete() > Unable to track: in ERROR state."),void 0):(this.log("#trackAdComplete() > Tracking an AD_COMPLETE event."),this._stopAdPlayback(!0),this._closeAd(),void 0):(this.warn("#trackAdComplete() > Call to trackAdComplete() while session not active."),void 0)},a.prototype.trackBitrateChange=function(){return this._isDestroyed?(this.warn("#trackBitrateChange() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackBitrateChange() > Unable to track: in ERROR state."),void 0):(this.log("#trackBitrateChange() > Querying the player delegate."),this._qosInfo=this._playerDelegate.getQoSInfo(),void 0===this._qosInfo.bitrate||null===this._qosInfo.bitrate||isNaN(this._qosInfo.bitrate)?(this.warn("#trackBitrateChange() > Bitrate is NaN, null or undefined: doing nothing."),void 0):(this.log("#trackBitrateChange() > Tracking a BITRATE_CHANGE event (bitrate="+this._qosInfo.bitrate+")."),this._enqueueHeartbeatCall(this._heartbeat.bitrateChange,[this._qosInfo.bitrate]),void 0)):(this.warn("#trackBitrateChange() > Unable to track: no active tracking session."),void 0)},a.prototype.trackVideoPlayerError=function(t){return this._isDestroyed?(this.warn("#trackVideoPlayerError() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackVideoPlayerError() > Unable to track: in ERROR state."),void 0):(this.log("#trackVideoPlayerError() > Tracking an PLAYER_ERROR event (errorId="+t+", playhead="+this._videoInfo.playhead+")."),this._enqueueHeartbeatCall(this._heartbeat.trackError,[d,t,this._videoInfo.playhead]),void 0):(this.warn("#trackVideoPlayerError() > Unable to track: no active tracking session."),void 0)},a.prototype.trackApplicationError=function(t){return this._isDestroyed?(this.warn("#trackApplicationError() > Unable to track: instance previously destroyed."),this._executeErrorCallback("Illegal operation.","Instance previously destroyed."),void 0):this._isViewingSessionActive?this._errorInfo?(this.warn("#trackApplicationError() > Unable to track: in ERROR state."),void 0):(this.log(this,"#trackApplicationError() > Tracking an APPLICATION_ERROR event (errorId="+t+", playhead="+this._videoInfo.playhead+")."),this._enqueueHeartbeatCall(this._heartbeat.trackError,[p,t,this._videoInfo.playhead]),void 0):(this.warn("#trackApplicationError() > Unable to track: no active tracking session."),void 0)},e.VideoHeartbeat=a}(s,i,a,e),t.ADB||(t.ADB={}),t.ADB.core||(t.ADB.core=s),t.ADB.va=i})(this);
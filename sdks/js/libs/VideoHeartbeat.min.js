/*
 * ************************************************************************
 *
 *  ADOBE CONFIDENTIAL
 *  ___________________
 *
 *   (c) Copyright 2014 Adobe Systems Incorporated
 *   All Rights Reserved.
 *
 *  NOTICE:  All information contained herein is, and remains
 *  the property of Adobe Systems Incorporated and its suppliers,
 *  if any.  The intellectual and technical concepts contained
 *  herein are proprietary to Adobe Systems Incorporated and its
 *  suppliers and may be covered by U.S. and Foreign Patents,
 *  patents in process, and are protected by trade secret or copyright law.
 *  Dissemination of this information or reproduction of this material
 *  is strictly forbidden unless prior written permission is obtained
 *  from Adobe Systems Incorporated.
 * ************************************************************************
 */

/*
 * video heartbeats - v1.4.0 - 2014-10-23
 * Copyright (c) 2014 Adobe Systems, Inc. All Rights Reserved.
 */
 !function(a){if("undefined"==typeof b)var b={};if("undefined"==typeof c)var c={};if("undefined"==typeof d)var d={};if(d.radio||(d.radio={}),d.plugin||(d.plugin={}),"undefined"==typeof e)var e={};if("undefined"==typeof f)var f={};f.event||(f.event={}),f.model||(f.model={}),f.context||(f.context={}),f.network||(f.network={}),f.clock||(f.clock={}),function(a){"use strict";function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;16>c;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}"function"==typeof define&&define.amd?define(function(){return t}):a.md5=t}(b),function(a){"use strict";var b="js",c="1",d="4",e="0",f="1",g="6995d33",h=2,i={};i.getVersion=function(){return b+"-"+c+"."+d+"."+e+"."+f+"-"+g},i.getMajor=function(){return c},i.getMinor=function(){return d},i.getMicro=function(){return e},i.getPatch=function(){return f},i.getBuild=function(){return g},i.getApiLevel=function(){return h},a.Version=i}(c),function(a){"use strict";function b(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a}a.extend=b}(d),function(a){"use strict";function b(a,b){var c=[];for(var d in b)b.hasOwnProperty(d)&&"function"==typeof b[d]&&c.push(d);for(var e=0;e<c.length;e++){var f=c[e];a.prototype[f]=b[f]}}a.mixin=b}(d),function(a){"use strict";a.LOGGING_ENABLED=!1,a.logger={enableLogging:function(a){this._logEnabled=!0,this._logTag=a},disableLogging:function(){this._logEnabled=!1},log:function(b){a.LOGGING_ENABLED&&this._logEnabled&&window.console&&window.console.log&&window.console.log(this._logTag+b)},info:function(b){a.LOGGING_ENABLED&&this._logEnabled&&window.console&&window.console.info&&window.console.info(this._logTag+b)},warn:function(b){a.LOGGING_ENABLED&&this._logEnabled&&window.console&&window.console.warn&&window.console.warn(this._logTag+b)},error:function(a){if(window.console&&window.console.error)throw a=this._logTag+a,window.console.error(a),new Error(a)}}}(d),function(a,b){"use strict";function c(a,b){this._onFail={fn:a,ctx:b}}function d(a){if(a){if(null==a.id||""===a.id)return"Video ID cannot be null or empty string";if(a.streamType!=b.ASSET_TYPE_VOD&&a.streamType!=b.ASSET_TYPE_LIVE&&a.streamType!=b.ASSET_TYPE_LINEAR)return"Stream type must be one of "+b.ASSET_TYPE_VOD+", "+b.ASSET_TYPE_LIVE+", "+b.ASSET_TYPE_LINEAR;if(null==a.length||isNaN(a.length))return"Video length cannot be null or NaN";if(null==a.playhead||isNaN(a.playhead))return"Video playhead cannot be null or NaN";if(null==a.playerName||""===a.playerName)return"Video player-name cannot be null or empty string."}return null}function e(a){if(a){if(null==a.playerName||""===a.playerName)return"Ad-break player-name cannot be null or empty string";if(null==a.position||isNaN(a.position))return"Ad-break position cannot be null or NaN"}return null}function f(a){if(a){if(null==a.id||""===a.id)return"Ad ID cannot be null or empty string";if(null==a.position||isNaN(a.position))return"Ad position cannot be null or NaN";if(null==a.length||isNaN(a.length))return"Ad length cannot be null or NaN"}return null}function g(a){if(a){if(null==a.position||isNaN(a.position))return"Chapter position cannot be null or NaN";if(null==a.startTime||isNaN(a.startTime))return"Chapter offset (start-time) cannot be null or NaN";if(null==a.length||isNaN(a.length))return"Chapter length cannot be null or NaN"}return null}c.prototype.sanitizeVideoInfo=function(a){if(!a)return this._fail("VideoInfo cannot be null");var b=d(a);return b?this._fail(b):!0},c.prototype.sanitizeAdBreakInfo=function(a,b){if(!b&&!a)return this._fail("AdBreakInfo cannot be null");var c=e(a);return c?this._fail(c):!0},c.prototype.sanitizeAdInfo=function(a,b){if(!b&&!a)return this._fail("AdInfo cannot be null");var c=f(a);return c?this._fail(c):!0},c.prototype.sanitizeChapterInfo=function(a,b){if(!b&&!a)return this._fail("ChapterInfo cannot be null");var c=g(a);return c?this._fail(c):!0},c.prototype._fail=function(a){var c=new b.ErrorInfo("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,c),!1},a.InputDataSanitizer=c}(d,c),function(a){"use strict";function b(a,b){this.type=a,this.data=b}b.SUCCESS="success",b.ERROR="error",a.radio.Event=b}(d),function(a){"use strict";function b(a,b,c){this.fn=a,this.ctx=b,this.params=c}b.prototype.run=function(){this.fn.apply(this.ctx,this.params)},a.radio.Command=b}(d),function(a){"use strict";function b(a,b){this._queue=[],this._drainInProgress=!1,this._isSuspended="undefined"!=typeof a?a:!1,this._delay="undefined"!=typeof b?b:0}b.prototype.addCommand=function(a){this._queue.push(a),this._drain()},b.prototype.cancelAllCommands=function(){this._queue=[]},b.prototype.isEmpty=function(){return 0===this._queue.length},b.prototype.suspend=function(){this._isSuspended=!0},b.prototype.resume=function(){this._isSuspended=!1,this._drain()},b.prototype.flush=function(){this._isSuspended=!1;for(var a=0;a<this._queue.length;a++)this._queue[a].run();this._queue=[]},b.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var a=this;!function b(){var c=a._queue.shift();c?a._runCommand(c,function(){a._isSuspended||b()}):a._drainInProgress=!1}()}},b.prototype._runCommand=function(a,b){var c=this;window.setTimeout(function(){a.run(),null!=b&&b.call(c)},this._delay)},a.radio.CommandQueue=b}(d),function(a){"use strict";function b(a){this._name=a,this._listeners={},this._requests={},this._commands={},this.enableLogging("[radio::Channel] > ")}var c=a.mixin,d=a.logger;c(b,d),b.WILDCARD="*",b.SEPARATOR=":",b.prototype.toString=function(){return"<channel: "+this._name+">"},b.prototype.shutdown=function(){this.log("#shutdown > Shutting down"),this.off(),this._requests={},this._commands={}},b.prototype.on=function(a,b,c){this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push({fn:b,ctx:c})},b.prototype.off=function(a,b,c){if(b="function"==typeof b?b:null,!a&&null===b&&!c)return void(this._listeners={});if(a)this._removeListener(a,b,c);else for(a in this._listeners)this._listeners.hasOwnProperty(a)&&this._removeListener(a,b,c)},b.prototype.trigger=function(a){for(var b in this._listeners)if(this._listeners.hasOwnProperty(b)&&this._matchWildcard(b,a.type))for(var c=this._listeners[b],d=c.slice(0),e=d.length,f=0;e>f;f++){var g=d[f];g.fn.call(g.ctx,a)}},b.prototype.comply=function(a,b,c){this._commands[a]={cmd:b,ctx:c}},b.prototype.command=function(a){var b=this._commands[a];if(!b)return void this.warn("#command > No command handler for: "+a);var c=Array.prototype.slice.call(arguments,1);b.cmd.apply(b.ctx,c)},b.prototype.reply=function(a,b,c){this._requests[a]={response:b,ctx:c}},b.prototype.request=function(a){var b=this._requests[a];return b?b.response.call(b.ctx):(this.warn("#request > No request handler for: "+a),null)},b.prototype._removeListener=function(a,b,c){b="function"==typeof b?b:null;var d=this._listeners[a];if(d){if(!d.length||null==b&&!c)return void delete this._listeners[a];for(var e=0;e<d.length;e++){var f=d[e];null!==b&&b!==f.fn||c&&c!==f.ctx||this._listeners[a].splice(e,1)}}},b.prototype._matchWildcard=function(a,c){if(a===c)return!0;for(var d=(a||"").split(b.SEPARATOR),e=(c||"").split(b.SEPARATOR),f=!0,g=0;g<d.length;g++)f=f&&(d[g]===b.WILDCARD||d[g]===e[g]);return f},a.radio.Channel=b}(d),function(a){"use strict";function b(){this._channels={}}var c=a.radio.Channel;b.prototype.channel=function(a){return this._channels[a]||(this._channels[a]=new c(a)),this._channels[a]},b.prototype.shutdown=function(){for(var a in this._channels)this._channels.hasOwnProperty(a)&&this._channels[a].shutdown()},a.radio.Radio=b}(d),function(a){"use strict";function b(){this._events={}}b.prototype.addEventListener=function(a,b,c){a&&b&&(c=c||window,this._events[a]=this._events[a]||[],this._events[a].push({cb:b,ctx:c}))},b.prototype.removeEventListener=function(a,b,c){if(a&&b){c=c||window;var d,e,f=!1;for(e in this._events)if(a===e){f=!0;break}if(f){for(d=this._events[e].length-1;d>=0;d--){var g=this._events[e][d];b===g.cb&&c===g.ctx&&this._events[e].splice(d,1)}this._events[e].length||delete this._events[e]}}},b.prototype.dispatchEvent=function(a){if(a.type){var b,c;for(b in this._events)if(this._events.hasOwnProperty(b)&&a.type===b){var d=this._events[b],e=d.slice(0),f=e.length;for(c=0;f>c;c++)e[c].cb.call(e[c].ctx,a);break}}},b.prototype.removeAllListeners=function(a){if(a){var b,c;for(c in this._events)if(this._events.hasOwnProperty(c)){for(b=this._events[c].length-1;b>=0;b--){var d=this._events[c][b];d.ctx===a&&this._events[c].splice(b,1)}this._events[c].length||delete this._events[c]}}else this._events={}},a.EventDispatcher=b}(d),function(a){"use strict";function b(){}function c(a,b){this.url=a||null,this.method=b,this._xmlhttp=null}function d(){d.__super__.constructor.call(this),this._connection=null}var e=a.radio.Event,f=a.EventDispatcher;b.GET="GET",d.RESPONSE="response",d.INSTANCE="instance",a.extend(d,f),d.prototype._createCORSRequest=function(a){var b=null;if("undefined"!=typeof window.XMLHttpRequest){var c=new window.XMLHttpRequest;"withCredentials"in c&&(b=c,b.open(a.method,a.url,!0))}if(null==b&&"undefined"!=typeof window.XDomainRequest&&(b=new window.XDomainRequest,b.open(a.method,a.url)),b){var f={};f[d.INSTANCE]=this;var g=this;b.onload=function(){return b.status&&parseInt(b.status,10)>=400?this.onerror():(f[d.RESPONSE]=b.responseText,void g.dispatchEvent(new e(e.SUCCESS,f)))},b.onerror=function(){g.dispatchEvent(new e(e.ERROR,f))}}return b},d.prototype._loadImage=function(a){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=a.url;var b={};b[d.RESPONSE]="",b[d.INSTANCE]=this,this.dispatchEvent(new e(e.SUCCESS,b))},d.prototype.close=function(){this.removeAllListeners()},d.prototype.load=function(a){a&&a.method&&a.url&&(a._xmlhttp=this._createCORSRequest(a),a._xmlhttp?a._xmlhttp.send():this._loadImage(a))},a.URLRequestMethod=b,a.URLRequest=c,a.URLLoader=d}(d),function(a){"use strict";function b(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}a.AdBreakInfo=b}(c),function(a){"use strict";function b(){this.id=null,this.name=null,this.length=null,this.position=null,this.cpm=null}a.AdInfo=b}(c),function(a){"use strict";a.ASSET_TYPE_VOD="vod",a.ASSET_TYPE_LIVE="live",a.ASSET_TYPE_LINEAR="linear"}(c),function(a){"use strict";function b(){this.name=null,this.length=null,this.position=null,this.startTime=null}a.ChapterInfo=b}(c),function(a){"use strict";function b(a,b,e){this.trackingServer=a,this.jobId=b,this.publisher=e,this.channel=d,this.ovp=c,this.sdk=c,this.debugLogging=!1,this.quietMode=!1,this.__primetime=!1,this.__psdkVersion=null}var c="unknown",d="";a.ConfigData=b}(c),function(a){"use strict";function b(a,b){this.message=a,this.details=b}a.ErrorInfo=b}(c),function(a){"use strict";function b(){}b.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getAdBreakInfo=function(){return null},b.prototype.getAdInfo=function(){return null},b.prototype.getChapterInfo=function(){return null},b.prototype.getQoSInfo=function(){return null},b.prototype.onError=function(){},b.prototype.onVideoUnloaded=function(){},a.PlayerDelegate=b}(c),function(a){"use strict";function b(){this.bitrate=null,this.fps=null,this.droppedFrames=null}a.QoSInfo=b}(c),function(a){"use strict";function b(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.streamType=null}a.VideoInfo=b}(c),function(a){"use strict";function b(){}b.prototype.bootstrap=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getProperty=function(){throw new Error("Implementation error: Method must be overridden.")},a.plugin.IPlugin=b}(d),function(a,b){"use strict";function c(){this._plugins={},this._radio=new h,this._channel=this._radio.channel(c.CHANNEL_GLOBAL),this.enableLogging("[plugin::PluginManager] > ")}var d=a.mixin,e=a.logger,f=b.ErrorInfo,g=a.radio.Event,h=a.radio.Radio,i=a.radio.Channel;d(c,e),c.ALL_PLUGINS=i.WILDCARD,c.ERROR="error",c.CHANNEL_GLOBAL="plugin_manager:global",c.prototype.addPlugin=function(a){var b=a.getName();this._plugins[b]&&this.warn("#addPlugin > Replacing plugin: "+b),this._plugins[b]=a,a.bootstrap(this)},c.prototype.setupPlugins=function(){for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].setup()},c.prototype.removePlugin=function(a){var b=a.getName();this._plugins[b]||this.warn("#removePlugin > Unregistered plugin: "+b),delete this._plugins[b]},c.prototype.pluginExists=function(a){return!!this._plugins[a]},c.prototype.isPluginInitialized=function(a){return this._plugins[a]&&this._plugins[a].isInitialized()},c.prototype.on=function(a,b,c,d){this._channel.on(a+i.SEPARATOR+b,c,d)},c.prototype.off=function(a,b,c,d){this._channel.off(a+i.SEPARATOR+b,c,d)},c.prototype.trigger=function(a,b){var d=b.type.split(i.SEPARATOR),e=d[0],h=a.getName();if(h!=e){var j="Invalid event namespace. (event: "+b.type+", plugin: "+h+")";return void this._channel.trigger(new g(c.ERROR,new f("Internal error",j)))}this._channel.trigger(b)},c.prototype.request=function(a,b){var c=this._plugins[a];return c?c.getProperty(b):null},c.prototype.destroy=function(){this._radio.shutdown();for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].destroy()},a.plugin.PluginManager=c}(d,c),function(a,b){"use strict";function c(a){this._name=a,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this.enableLogging("[plugin::"+this.getName()+"] > ")}var d=b.ErrorInfo,e=a.radio.Event,f=a.plugin.PluginManager;a.mixin(c,a.logger),c.INITIALIZED="initialized",c.STATE_PLUGIN="state",c.ERROR_INFO="error_info",c.prototype.bootstrap=function(a){this._pluginManager=a,this._isDestroyed&&this._trigger(f.ERROR,new d("Invalid state.","Plugin already destroyed."))},c.prototype.setup=function(){this._trigger(c.INITIALIZED),this._isInitialized=!0},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},c.prototype.enable=function(){this._isEnabled=!0,this._enabled()},c.prototype.disable=function(){this._isEnabled=!1,this._disabled()},c.prototype.getName=function(){return this._name},c.prototype.isInitialized=function(){return this._isInitialized},c.prototype.getProperty=function(a){if("function"==typeof this._dataResolver)return this._dataResolver.call(this,a);if(this._dataResolver.hasOwnProperty(a)){var b=this._dataResolver[a];return"function"==typeof b?b.call(this):b}},c.prototype.toString=function(){return"<plugin: "+this._name+">"},c.prototype._enabled=function(){},c.prototype._disabled=function(){},c.prototype._teardown=function(){},c.prototype._canProcess=function(){var a=this._pluginManager.request(c.STATE_PLUGIN,c.ERROR_INFO);return a?(this.warn("#_canProcess() > Unable to track: in ERROR state."),!1):this._isEnabled?this._isDestroyed?(this.warn("Plugin destroyed."),!1):!0:(this.warn("Plugin disabled."),!1)},c.prototype._trigger=function(a,b){this._pluginManager.trigger(this,new e(this.getName()+":"+a,b))},c.prototype._onInvalidInputData=function(a){this._trigger(f.ERROR,a)},a.plugin.BasePlugin=c}(d,c),function(a,b){"use strict";function c(){}c.REPORT="report",c.RESET="reset",c.TRACKING_SERVER="tracking_server",c.CHECK_STATUS_SERVER="check_status_server",c.JOB_ID="job_id",c.QUIET_MODE="quiet_mode",c.VIDEO_INFO="video_info",c.AD_INFO="ad_info",c.AD_BREAK_INFO="ad_break_info",c.CHAPTER_INFO="chapter_info",c.TIMER_INTERVAL="timer_interval",c.TRACKING_INTERVAL="tracking_interval",c.CHECK_STATUS_INTERVAL="check_status_interval",c.TRACK_EXTERNAL_ERRORS="track_external_errors",c.SOURCE="source",c.ERROR_ID="error_id",b.event.EventKeyName=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a,b)}var d=a.radio.Event;a.extend(c,d),c.API_CONFIG="api_config",c.API_VIDEO_LOAD="api_video_load",c.API_VIDEO_UNLOAD="api_video_unload",c.API_VIDEO_START="api_video_start",c.API_VIDEO_COMPLETE="api_video_complete",c.API_AD_START="api_ad_start",c.API_AD_COMPLETE="api_ad_complete",c.API_PLAY="api_play",c.API_PAUSE="api_pause",c.API_BUFFER_START="api_buffer_start",c.API_SEEK_START="api_seek_start",c.API_SEEK_COMPLETE="api_seek_complete",c.API_CHAPTER_START="api_chapter_start",c.API_CHAPTER_COMPLETE="api_chapter_complete",c.API_TRACK_ERROR="api_track_error",c.API_TRACK_INTERNAL_ERROR="api_track_internal_error",c.API_BITRATE_CHANGE="api_bitrate_change",b.event.ApiEvent=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a,b)}var d=a.radio.Event;a.extend(c,d),c.CONTEXT_DATA_AVAILABLE="context_data_available",b.event.ContextEvent=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a,b)}var d=a.radio.Event;a.extend(c,d),c.NETWORK_CHECK_STATUS_COMPLETE="network_check_status_complete",b.event.NetworkEvent=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a,b)}var d=a.radio.Event;a.extend(c,d),c.CLOCK_TRACKING_TICK="CLOCK_TRACKING_TICK",c.CLOCK_CHECK_STATUS_GET_SETTINGS="CLOCK_CHECK_STATUS_GET_SETTINGS",c.CLOCK_TRACKING_ENABLE="CLOCK_TRACKING_ENABLE",c.CLOCK_TRACKING_DISABLE="CLOCK_TRACKING_DISABLE",c.CLOCK_CHECK_STATUS_TICK="CLOCK_CHECK_STATUS_TICK",c.CLOCK_CHECK_STATUS_ENABLE="CLOCK_CHECK_STATUS_ENABLE",c.CLOCK_CHECK_STATUS_DISABLE="CLOCK_CHECK_STATUS_DISABLE",b.event.ClockEvent=c}(d,f),function(a,b){"use strict";function c(a,b){this.value=a,this.hint=b}function d(a){this.realm=a,this.data={}}c.HINT_SHORT="short",d.prototype._createAccessor=function(a,b,c){var d=this;return function(){return arguments.length&&(d[a]=arguments[0],d.setField(b,arguments[0],c)),d[a]}},d.prototype.setField=function(a,b,d){this.data[a]=new c(b,d)},b.model.Dao=d,b.model.DaoField=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a),this.year=this._createAccessor("_year","year",e.HINT_SHORT),this.month=this._createAccessor("_month","month",e.HINT_SHORT),this.day=this._createAccessor("_day","day",e.HINT_SHORT),this.hour=this._createAccessor("_hour","hour",e.HINT_SHORT),this.minute=this._createAccessor("_minute","minute",e.HINT_SHORT),this.second=this._createAccessor("_second","second",e.HINT_SHORT),this.year(b.getUTCFullYear()),this.month(b.getUTCMonth()+1),this.day(b.getUTCDate()),this.hour(b.getUTCHours()),this.minute(b.getUTCMinutes()),this.second(b.getUTCSeconds())}var d=b.model.Dao,e=b.model.DaoField;a.extend(c,d),b.model.DateDao=c}(d,f),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podSecond=this._createAccessor("_podSecond","pod_second",null),this.length=this._createAccessor("_length","length",null),this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podSecond(0),this.length(0),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.adId(a.adId()),this.sid(a.sid()),this.resolver(a.resolver()),this.podId(a.podId()),this.podPosition(a.podPosition()),this.podSecond(a.podSecond()),this.length(a.length())}}var d=b.model.Dao;a.extend(c,d),b.model.AdDao=c}(d,f),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.id(a.id()),this.sid(a.sid()),this.name(a.name()),this.position(a.position()),this.length(a.length()),this.offset(a.offset())}}var d=b.model.Dao;a.extend(c,d),b.model.ChapterDao=c}(d,f),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.duration=this._createAccessor("_duration","duration",null),this.type(""),this.videoId(""),this.publisher(""),this.adData(null),this.chapterData(null),this.duration(0),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type()),this.videoId(a.videoId()),this.publisher(a.publisher()),this.duration(a.duration());var b=a.adData();b&&this.adData(new e(b));var d=a.chapterData();d&&this.chapterData(new f(d))}}var d=b.model.Dao,e=b.model.AdDao,f=b.model.ChapterDao;a.extend(c,d),c.TYPE_VOD="vod",c.TYPE_LIVE="live",c.TYPE_LINEAR="linear",c.TYPE_AD="ad",b.model.AssetDao=c}(d,f),function(a,b){"use strict";function c(a){c.__super__.constructor.call(this,"event"),this._trackingInterval=a,this.type=this._createAccessor("_type","type",null),this.count=this._createAccessor("_count","count",null),this.totalCount=this._createAccessor("_totalCount","total_count",null),this.duration=this._createAccessor("_duration","duration",null),this.totalDuration=this._createAccessor("_totalDuration","total_duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),this.type(""),this.count(0),this.totalCount(0),this.duration(0),this.totalDuration(0),this.playhead(0),this.id(""),this.source(""),this.ts((new Date).getTime()),this._updateTsAsDate(),this.prevTs(-1)}var d=b.model.Dao,e=b.model.DateDao;a.extend(c,d),c.prototype._updateTsAsDate=function(){var a=1e3*this._trackingInterval,b=Math.floor(this._ts/a)*a;this.tsAsDate(new Date(b))},c.prototype.ts=function(){return arguments.length&&(this._ts=arguments[0],this.setField("ts",this._ts,null),this._updateTsAsDate()),this._ts},c.prototype.tsAsDate=function(){if(arguments.length){this._tsAsDate=arguments[0];var a=new e(this.realm,this._tsAsDate);this.setField("ts_as_date",a,null)}return this._tsAsDate},c.EVENT_TYPE_LOAD="load",c.EVENT_TYPE_UNLOAD="unload",c.EVENT_TYPE_START="start",c.EVENT_TYPE_CHAPTER_START="chapter_start",c.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",c.EVENT_TYPE_PLAY="play",c.EVENT_TYPE_PAUSE="pause",c.EVENT_TYPE_BUFFER="buffer",c.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",c.EVENT_TYPE_ERROR="error",c.EVENT_TYPE_ACTIVE="active",c.EVENT_TYPE_COMPLETE="complete",b.model.EventDao=c}(d,f),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.bitrate(0),this.fps(0),this.droppedFrames(0)}var d=b.model.Dao;a.extend(c,d),b.model.QoSDao=c}(d,f),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",e.HINT_SHORT),this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var d=b.model.Dao,e=b.model.DaoField;a.extend(c,d),b.model.AdobeAnalyticsDao=c}(d,f),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),this.ovp(e),this.sdk(e),this.channel(e),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var d=b.model.Dao,e="unknown";a.extend(c,d),b.model.ServiceProviderDao=c}(d,f),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),this.sessionId(null)}var d=b.model.Dao;a.extend(c,d),b.model.SessionDao=c}(d,f),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.cdn=this._createAccessor("_cdn","cdn",null),this.name=this._createAccessor("_name","name",null),this.cdn(null),this.name(null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.cdn(a.cdn()),this.name(a.name())}}var d=b.model.Dao;a.extend(c,d),b.model.StreamDao=c}(d,f),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.analyticsVisitorId(a.analyticsVisitorId()),this.marketingCloudVisitorId(a.marketingCloudVisitorId()),this.visitorId(a.visitorId())}}var d=b.model.Dao;a.extend(c,d),b.model.UserDao=c}(d,f),function(a,b){"use strict";function c(a,b,c,d){this.eventData=a,this.assetData=b,this.streamData=c,this.qosData=d}b.model.ReportEntry=c}(d,f),function(a,b){"use strict";function c(a,b,c,d){this.adobeAnalyticsData=a,this.userData=b,this.serviceProviderData=c,this.sessionData=d,this.reportEntries=[]}var d=b.model.EventDao;c.prototype.addEntry=function(a){this.reportEntries.push(a)},c.prototype.discardPauseEvents=function(){if(this.reportEntries.length)for(var a=this.reportEntries.length-1;a>=0;a--)this.reportEntries[a].eventData.type()===d.EVENT_TYPE_PAUSE&&this.reportEntries.splice(a,1)},b.model.Report=c}(d,f),function(a,b){"use strict";function c(){}c.prototype.serializeReport=function(){},c.prototype.serializeReportEntry=function(){},c.prototype.serializeDao=function(){},c.prototype.serializeNumber=function(){},c.prototype.serializeString=function(){},b.model.SerializerProtocol=c}(d,f),function(a,b){"use strict";function c(){this.enableLogging("[heartbeat::QuerystringSerializer] > ")}var d=a.mixin,e=a.logger,f=b.model.Dao,g=b.model.DaoField,h=b.model.SerializerProtocol,i="l",j="h",k="s";a.extend(c,h),d(c,e),c.prototype._appendSerializedData=function(a){return a?a+"&":""},c.prototype._removeLastCharacter=function(a){return a&&a.length>0&&(a=a.substring(0,a.length-1)),a},c.prototype._processDao=function(a){var b=[];for(var c in a.data)if(a.data.hasOwnProperty(c)){var d=a.data[c],e=d.value,g=d.hint,h=null,i=a.realm;if(null===e||"undefined"==typeof e)continue;"number"==typeof e?h=this.serializeNumber(c,e,i,g):"string"==typeof e?h=this.serializeString(c,e,i,g):e instanceof f?h=this.serializeDao(e):this.warn("#_processDao() > Unable to serialize DAO. Field: "+c+". Value: "+e+"."),h&&b.push(h)}return b},c.prototype.serializeReport=function(a){for(var b=[],c=a.reportEntries,d=0;d<c.length;d++){var e=this.serializeReportEntry(c[d])+"&";e+=this._appendSerializedData(this.serializeDao(a.adobeAnalyticsData)),e+=this._appendSerializedData(this.serializeDao(a.userData)),e+=this._appendSerializedData(this.serializeDao(a.serviceProviderData)),e+=this._appendSerializedData(this.serializeDao(a.sessionData)),e=this._removeLastCharacter(e),b.push(e)
}return b},c.prototype.serializeReportEntry=function(a){var b=this._appendSerializedData(this.serializeDao(a.eventData));return b+=this._appendSerializedData(this.serializeDao(a.assetData)),b+=this._appendSerializedData(this.serializeDao(a.streamData)),b+=this._appendSerializedData(this.serializeDao(a.qosData)),b=this._removeLastCharacter(b)},c.prototype.serializeDao=function(a){for(var b=this._processDao(a),c="",d=0;d<b.length;d++)c+=d==b.length-1?b[d]:b[d]+"&";return c},c.prototype.serializeNumber=function(a,b,c,d){var e=i;return null==b||void 0===b||isNaN(b)?null:(d&&"string"==typeof d&&d===g.HINT_SHORT&&(e=j),e+":"+c+":"+a+"="+Math.floor(b))},c.prototype.serializeString=function(a,b,c){return b?k+":"+c+":"+a+"="+window.encodeURIComponent(b):null},b.model.QuerystringSerializer=c}(d,f),function(a,b){"use strict";function c(a){this.tick=0,this.interval=a,this.isActive=!1}function d(a){this._isDestroyed=!1,this._currentTick=0,this._timers={},this._channel=a;var b=this;this._clock=window.setInterval(function(){b._onTick()},1e3*i),this.enableLogging("[heartbeat::TimerManager] > ")}var e=a.logger,f=a.mixin,g=(a.radio.Command,b.event.ClockEvent),h=b.event.EventKeyName,i=1;f(d,e),d.prototype.isTimerActive=function(a){var b=this._timers[a];return b&&b.isActive},d.prototype.createTimer=function(a,b){this._timers[a]=new c(b)},d.prototype.destroyTimer=function(a){delete this._timers[a]},d.prototype.startTimer=function(a,b){this.log("#startTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!0,b&&(c.tick=0))},d.prototype.stopTimer=function(a,b){this.log("#stopTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!1,b&&(c.tick=0))},d.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,window.clearInterval(this._clock))},d.prototype._onTick=function(){this.log("#_onTick() > ------------------- ("+this._currentTick+")"),this._currentTick++;for(var a in this._timers)if(this._timers.hasOwnProperty(a)){var b=this._timers[a];if(b.isActive&&(b.tick++,b.tick%b.interval===0)){var c={};c[h.TIMER_INTERVAL]=b.interval,this._channel.trigger(new g(g[a],c))}}},b.clock.TimerManager=d}(d,f),function(a,b){"use strict";function c(a,b,c,d,e,f){this.enableLogging("[heartbeat::Timer] > "),this._isDestroyed=!1,this._channel=a,this._timerManager=b,this._interval=f,this._tickEventName=c,this._enableEventName=d,this._disableEventName=e,this._timerManager.createTimer(this._tickEventName,this._interval),this._installEventListeners()}var d=a.logger,e=a.mixin,f=b.event.EventKeyName;e(c,d),c.prototype.start=function(a){this.log("Starting timer: "+this._tickEventName),this._timerManager.startTimer(this._tickEventName,a)},c.prototype.stop=function(a){this.log("Stopping timer: "+this._tickEventName+")"),this._timerManager.stopTimer(this._tickEventName,a)},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._uninstallEventListeners(),this._timerManager.destroyTimer(this._tickEventName))},c.prototype.setInterval=function(a){var b=this._timerManager.isTimerActive(this._tickEventName);this.stop(!0),this._interval=a,this._timerManager.createTimer(this._tickEventName,this._interval),b&&this.start(!0)},c.prototype._onTimerEnabled=function(a){var b=a.data,c=!1;b&&b.hasOwnProperty(f.RESET)&&(c=b[f.RESET]),this.start(c)},c.prototype._onTimerDisabled=function(a){var b=a.data,c=!1;b&&b.hasOwnProperty(f.RESET)&&(c=b[f.RESET]),this.stop(c)},c.prototype._installEventListeners=function(){this._channel.on(this._enableEventName,this._onTimerEnabled,this),this._channel.on(this._disableEventName,this._onTimerDisabled,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},b.clock.Timer=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a,b,g.CLOCK_TRACKING_TICK,g.CLOCK_TRACKING_ENABLE,g.CLOCK_TRACKING_DISABLE,j),this._installEventListeners(),this.enableLogging("[heartbeat::TrackingTimer] > ")}var d=a.mixin,e=a.logger,f=b.event.NetworkEvent,g=b.event.ClockEvent,h=b.event.EventKeyName,i=b.clock.Timer,j=10;c.TRACKING_TIMER_INTERVAL="tracking_timer_interval",a.extend(c,i),d(c,e),c.prototype._onCheckStatusComplete=function(a){var b=a.data[h.TRACKING_INTERVAL];if(this.log("#_onCheckStatusComplete(interval="+b+")"),b){if(b==this._interval)return void this.log("#_onCheckStatusComplete() > Interval value not changed.");this.log("#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b)}else this.warn("#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(j)},c.prototype._installEventListeners=function(){this._channel.on(f.NETWORK_CHECK_STATUS_COMPLETE,this._onCheckStatusComplete,this),this._channel.reply(c.TRACKING_TIMER_INTERVAL,function(){return this._interval},this),c.__super__._installEventListeners.call(this)},b.clock.TrackingTimer=c}(d,f),function(a,b){"use strict";function c(a,b){c.__super__.constructor.call(this,a,b,j.CLOCK_CHECK_STATUS_TICK,j.CLOCK_CHECK_STATUS_ENABLE,j.CLOCK_CHECK_STATUS_DISABLE,e),this._installEventListeners(),this.enableLogging("[heartbeat::CheckStatusTimer] > "),this.log("#CheckStatusTimer()"),this._channel.on(j.CLOCK_CHECK_STATUS_GET_SETTINGS,this._getSettings,this)}var d=600,e=60,f=a.mixin,g=a.logger,h=(a.radio.Command,b.event.NetworkEvent),i=b.event.EventKeyName,j=b.event.ClockEvent,k=b.clock.Timer;a.extend(c,k),f(c,g),c.prototype._onCheckStatusComplete=function(a){var b=a.data[i.CHECK_STATUS_INTERVAL];if(this.log("#_onCheckStatusComplete(interval="+b+")"),b){if(b==this._interval)return void this.log("#_onCheckStatusComplete() > Interval value not changed.");b>d?(this.warn("#_onCheckStatusComplete() > Interval value too large: "+b),this.setInterval(d)):(this.log("#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b))}else this.warn("#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(e)},c.prototype._getSettings=function(){this.log("#_getSettings()");var a={};a[i.TIMER_INTERVAL]=this._interval,this._channel.trigger(new j(j.CLOCK_CHECK_STATUS_TICK,a))},c.prototype._installEventListeners=function(){this._channel.on(h.NETWORK_CHECK_STATUS_COMPLETE,this._onCheckStatusComplete,this),c.__super__._installEventListeners.call(this)},b.clock.CheckStatusTimer=c}(d,f),function(a,b){"use strict";function c(a){this._isDestroyed=!1,this._timerManager=new d(a),this._checkStatusTimer=new e(a,this._timerManager),this._trackingTimer=new f(a,this._timerManager)}var d=b.clock.TimerManager,e=b.clock.CheckStatusTimer,f=b.clock.TrackingTimer;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._trackingTimer.destroy(),this._checkStatusTimer.destroy(),this._timerManager.destroy())},b.clock.Clock=c}(d,f),function(a,b){"use strict";function c(a){this._data=a,this.enableLogging("[heartbeat::SettingsParser] > "),this.log("#SettingsParser(data="+a+")")}{var d=a.mixin,e=a.logger,f=b.event.EventKeyName;b.event.NetworkEvent}d(c,e),c.prototype.parse=function(){var a,b,c,d;if(!this._data)return void this.warn("#SettingsParser() > No data available for parsing.");if(window.DOMParser){var e=new window.DOMParser;d=e.parseFromString(this._data,"text/xml")}else d=new window.ActiveXObject("Microsoft.XMLDOM"),d.async=!1,d.loadXML(this.data);var g;g=parseInt(d.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10),g&&(a=g),g=parseInt(d.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10),g&&(b=g),g=parseInt(d.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10),g&&(c=1==g);var h={};return h[f.TRACKING_INTERVAL]=a,h[f.CHECK_STATUS_INTERVAL]=b,h[f.TRACK_EXTERNAL_ERRORS]=c,this.log("#parse() > Obtained configuration settings: "+JSON.stringify(h)),h},b.network.SettingsParser=c}(d,f),function(a,b){"use strict";function c(a,c){s=b.HeartbeatPlugin,this._jobId=null,this._trackingServer=null,this._checkStatusServer=null,this._quietMode=!1,this._isConfigured=!1,this._isDestroyed=!1,this._channel=a,this._serializer=c,this._netQueue=new h,this._installEventListeners(),this.enableLogging("[heartbeat::Network] > ")}var d=a.mixin,e=a.logger,f=a.radio.Event,g=a.radio.Command,h=a.radio.CommandQueue,i=b.event.ApiEvent,j=a.URLRequestMethod,k=a.URLRequest,l=a.URLLoader,m=b.event.EventKeyName,n=b.event.ClockEvent,o=b.event.ContextEvent,p=b.event.NetworkEvent,q=b.network.SettingsParser,r=b.model.EventDao,s=b.HeartbeatPlugin;d(c,e),c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this.log("#destroy()"),this._netQueue.cancelAllCommands(),this._uninstallEventListeners())},c.prototype._onApiConfig=function(a){var b=a.data;this.log("#_onApiConfig(sb_server="+b[m.TRACKING_SERVER]+", check_status_server="+b[m.CHECK_STATUS_SERVER]+", job_id="+b[m.JOB_ID]+", quiet_mode="+b[m.QUIET_MODE]+")"),this._jobId=b[m.JOB_ID];var c=this._channel.request(s.USE_SSL);this._trackingServer=this._updateRequestProtocol(b[m.TRACKING_SERVER],c),this._checkStatusServer=this._updateRequestProtocol(b[m.CHECK_STATUS_SERVER],c),this._quietMode=b[m.QUIET_MODE],this._isConfigured=!0},c.prototype._onContextDataAvailable=function(b){if(!this._isConfigured)return void this.warn("#_onContextDataAvailable() > Unable to send request: not configured.");var c=new g(function(){for(var c=b.data[m.REPORT],d=this._serializer.serializeReport(c),e=0;e<d.length;e++){var g=d[e],h=this._trackingServer+"/?__job_id="+window.encodeURIComponent(this._jobId)+"&"+g,i=new k(h,j.GET);this.info("_onContextDataAvailable() > Sending request: "+i.url);var n=new l;!function(a,b){function c(){a.close()}function d(c){b.warn("#_onContextDataAvailable() > Failed to send heartbeat report: "+JSON.stringify(c)),a.close()}b._quietMode||(a.addEventListener(f.SUCCESS,c,this),a.addEventListener(f.ERROR,d,this),a.load(i))}(n,this)}c.reportEntries[0].eventData.type()==r.EVENT_TYPE_UNLOAD&&this._channel.trigger(new a.radio.Event(s.VIDEO_UNLOADED))},this);this._netQueue.addCommand(c)},c.prototype._onClockCheckStatusTick=function(){if(!this._isConfigured)return void this.warn("#_onClockCheckStatusTick() > Unable to send request: not configured.");var a=this._channel.request(s.PUBLISHER);if(!a)return void this.warn("#_onClockCheckStatusTick() > Publisher is NULL.");var b=new g(function(){function b(a){if(a.data){var b=new q(a.data.response),c=b.parse();c?d._channel.trigger(new p(p.NETWORK_CHECK_STATUS_COMPLETE,c)):d.warn("#_onClockCheckStatusTick() > Failed to parse the config. settings.")}h.close()}function c(a){d.warn("#_onClockCheckStatusTick() > Failed to obtain the config. settings: "+JSON.stringify(a)),h.close()}var d=this;a=a.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase();var e=this._checkStatusServer+a+".xml?r="+(new Date).getTime(),g=new k(e,j.GET),h=new l;h.addEventListener(f.SUCCESS,b,this),h.addEventListener(f.ERROR,c,this),this.log("#_onClockCheckStatusTick() > Get new settings from: "+e),h.load(g)},this);this._netQueue.addCommand(b)},c.prototype._updateRequestProtocol=function(a,b){var c=a;return 0===c.indexOf("http://")?c=c.slice(7):0===c.indexOf("https://")&&(c=c.slice(8)),b?"https://"+c:"http://"+c},c.prototype._installEventListeners=function(){this._channel.on(i.API_CONFIG,this._onApiConfig,this),this._channel.on(o.CONTEXT_DATA_AVAILABLE,this._onContextDataAvailable,this),this._channel.on(n.CLOCK_CHECK_STATUS_TICK,this._onClockCheckStatusTick,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},b.network.Network=c}(d,f),function(a,b){"use strict";function c(){this._totalCount={},this._totalDuration={},this.enableLogging("[heartbeat::Counters] > ")}function d(a){var b=a.getAssetId()+"."+a.assetData.type()+"."+a.eventType;return b}var e=a.mixin,f=a.logger;e(c,f),c.prototype.getTotalCount=function(a){var b=d(a);return this._totalCount[b]||(this._totalCount[b]=0),this.log("#getTotalCount(key="+b+")"),this._totalCount[b]},c.prototype.incrementTotalCount=function(a){var b=d(a);this._totalCount[b]||(this._totalCount[b]=0),this.log("#incrementTotalCount(key="+b+")"),this._totalCount[b]++},c.prototype.getTotalDuration=function(a){var b=d(a);return this._totalDuration[b]||(this._totalDuration[b]=0),this.log("#getTotalDuration(key="+b+")"),this._totalDuration[b]},c.prototype.increaseTotalDuration=function(a){var b=d(a);this._totalDuration[b]||(this._totalDuration[b]=0),this.log("#increaseTotalDuration(key="+b+", amount="+a.duration+")"),this._totalDuration[b]+=a.duration},c.prototype.resetCounters=function(a,b){var c=a+"."+b;this.log("#resetCounters(key="+c+")");var d;for(d in this._totalCount)this._totalCount.hasOwnProperty(d)&&-1!=d.indexOf(c)&&(this._totalCount[d]=0);for(d in this._totalDuration)this._totalDuration.hasOwnProperty(d)&&-1!=d.indexOf(c)&&(this._totalDuration[d]=0)},b.context.Counters=c}(d,f),function(a,b){"use strict";function c(){this._items={},this.enableLogging("[heartbeat::History] > ")}function d(a){var b=a.assetData,c=b.adData()?b.adData().adId():b.videoId();return c+"."+b.type()+"."+a.eventType}var e=a.mixin,f=a.logger;e(c,f),c.prototype.updateWith=function(a){var b=d(a);this.log("#updateWith(key="+b+")"),this._items[b]=a},c.prototype.getPreviousItemOfSameTypeWith=function(a){var b=d(a);return this.log("#getPreviousItemOfSameTypeWith(key="+b+")"),this._items[b]},b.context.History=c}(d,f),function(a,b){"use strict";function c(a,b,c,d,g){this.timestamp=new Date,this.assetData=new e(a),this.streamData=new f(b),this.qosData=c,this.eventType=d,this.playhead=g,this.duration=0,this.prevItemOfSameType=null}var d=b.model.EventDao,e=b.model.AssetDao,f=b.model.StreamDao;c.clone=function(a){var b=new c(a.assetData,a.streamData,a.qosData,a.eventType,a.playhead);return b.timestamp=a.timestamp,b},c.prototype.getAssetId=function(){return this.eventType===d.EVENT_TYPE_ACTIVE?this.assetData.videoId():this.assetData.adData()?this.assetData.adData().adId():this.assetData.videoId()},c.prototype.getEventCount=function(){return 1},b.context.TimelineItem=c}(d,f),function(a,b){"use strict";function c(a){this._timeline=[],this._context=a,this.enableLogging("[heartbeat::Timeline] > ")}function d(a){var b=a.eventType,c=a.assetData.type();return b===i.EVENT_TYPE_PLAY||b===i.EVENT_TYPE_BUFFER||b===i.EVENT_TYPE_START&&c!==j.TYPE_AD}function e(a,b){return b.getTime()-a.getTime()}var f=a.mixin,g=a.logger,h=b.context.TimelineItem,i=b.model.EventDao,j=b.model.AssetDao;f(c,g),c.prototype.getTimelineItems=function(){return this._timeline.slice()},c.prototype.getLast=function(){return this._timeline.length>0?this._timeline[this._timeline.length-1]:null},c.prototype.addItem=function(a){var b=this.getLast();b&&b.eventType!==i.EVENT_TYPE_ACTIVE&&(b.duration=e(b.timestamp,a.timestamp),this._updateItemStats(b)),this.log("#addItem() >  | "+a.assetData.type()+" | "+a.eventType+" | "+a.playhead+" | "+(a.prevItemOfSameType?a.prevItemOfSameType.timestamp.getTime():"-1")+" | "+a.timestamp.getTime()),this._timeline.push(a)},c.prototype.addActiveItem=function(a){var b=this.getLast();this.addItem(a),a.duration=0;for(var c=this._timeline.length-2;c>=0;c--){var e=this._timeline[c];if(e.eventType==i.EVENT_TYPE_ACTIVE)break;a.duration+=e.duration}if(this._updateItemStats(a),a.eventType===i.EVENT_TYPE_ACTIVE&&d(b)){var f=h.clone(b);f.prevItemOfSameType=b,f.timestamp=a.timestamp,f.playhead=a.playhead,f.duration=0,this.addItem(f)}},c.prototype._updateItemStats=function(a){var b=this._context._counters;b.incrementTotalCount(a),b.increaseTotalDuration(a)},b.context.Timeline=c}(d,f),function(a,b){"use strict";function c(a){this._context=a,this.enableLogging("[heartbeat::ReporterHelper] > ")}var d=a.mixin,e=a.logger,f=b.model.Report,g=b.model.EventDao,h=b.model.AssetDao,i=b.model.ReportEntry;d(c,e),c.prototype.createReportForItem=function(a,b){var c=this._context._counters,d=new f(this._context._adobeAnalyticsData,this._context._userData,this._context._serviceProviderData,this._context._sessionData);return a.duration=0,c.incrementTotalCount(a),c.increaseTotalDuration(a),d.addEntry(this._buildReportEntryForItem(a,b)),d},c.prototype.createReportForQuantum=function(a,b){var c,d,e=this._selectTimelineItemsForCurrentQuantum(b);for(this.log("#createReportForQuantum() > -------------[ SUMMARY REPORT ]----------------"),c=0;c<e.length;c++)d=e[c],this.log("#createReportForQuantum() >  | "+d.assetData.type()+" | "+d.eventType+" | "+d.playhead+" | "+d.duration);for(e=this._compactTimelineItems(e),this.log("#createReportForQuantum() > -----------------------------------------"),c=0;c<e.length;c++)d=e[c],this.log("#createReportForQuantum() >  | "+d.assetData.type()+" | "+d.eventType+" | "+d.playhead+" | "+d.duration);this.log("#createReportForQuantum() > -----------------------------------------");var f=this._createReport(e,a,b);return f},c.prototype._selectTimelineItemsForCurrentQuantum=function(a){var b,c,d=this._context._timeline.getTimelineItems(),e=[];if(a)b=d.length;else{for(c=d.length-2;c<d.length;c++){var f=d[c];if(f.eventType===g.EVENT_TYPE_ACTIVE){b=c,e.unshift(f);break}}if(!b)throw new Error("Expecting an ACTIVE event in the last 2 on the timeline.")}for(c=b-1;c>=0;c--){var h=d[c];if(h.eventType==g.EVENT_TYPE_ACTIVE)break;e.unshift(h)}return e},c.prototype._compactTimelineItems=function(a){var b,c=[],d=function(a){var b;for(b=0;b<c.length;b++){var d=c[b],e=!1;if(a.eventType==d.eventType&&a.assetData.type()==d.assetData.type()){if(e=a.assetData.type()==h.TYPE_AD?a.assetData.adData().adId()==d.assetData.adData().adId()&&a.assetData.adData().podPosition()==d.assetData.adData().podPosition():a.assetData.videoId()==d.assetData.videoId(),!e)continue;e=a.assetData.chapterData()?d.assetData.chapterData()&&a.assetData.chapterData().id()==d.assetData.chapterData().id()&&a.assetData.chapterData().position()==d.assetData.chapterData().position():null==d.assetData.chapterData()}if(e)return d}return null};for(b=0;b<a.length;b++){var e=a[b],f=d(e);f?(f.playhead=e.playhead,f.timestamp=e.timestamp,f.duration+=e.duration):c.push(e)}return c},c.prototype._createReport=function(a,b,c){var d,e=new f(this._context._adobeAnalyticsData,this._context._userData,this._context._serviceProviderData,this._context._sessionData);for(d=0;d<a.length;d++)e.addEntry(this._buildReportEntryForItem(a[d],b));var h=e.reportEntries[e.reportEntries.length-1];if(!c&&h.eventData.type()!=g.EVENT_TYPE_ACTIVE)throw new Error("Expecting the last report entry to represent an ACTIVE event.");for(d=0;d<e.reportEntries.length-1;d++){var i=e.reportEntries[d];i.eventData.tsAsDate(h.eventData.tsAsDate())}return e.discardPauseEvents(),e},c.prototype._buildReportEntryForItem=function(a,b){var c=this._context._counters,d=new g(b);return d.type(a.eventType),d.count(a.getEventCount()),d.duration(a.duration),d.totalCount(c.getTotalCount(a)),d.totalDuration(c.getTotalDuration(a)),d.playhead(a.playhead),d.ts(a.timestamp.getTime()),d.prevTs(a.prevItemOfSameType?a.prevItemOfSameType.timestamp.getTime():-1),new i(d,a.assetData,a.streamData,a.qosData)},b.context.ReporterHelper=c}(d,f),function(a,b,c,d){"use strict";function e(a){g=b.HeartbeatPlugin,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._adobeAnalyticsData=new s,this._serviceProviderData=new u,this._userData=new v,this._videoAssetType=null,this._counters=new z,this._history=null,this._timeline=null,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._activeAssetId=null,this._isDestroyed=!1,this._reporterHelper=new m(this),this._channel=a,this._stashedChapterData=null,this._stashedAdData=null,this._trackExternalErrors=!0,this._inputDataSanitizer=new l(this._onInvalidInputData,this),this._installEventListeners(),this.enableLogging("[heartbeat::Context] > ")}function f(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())}var g,h=a.mixin,i=a.deferrable,j=a.logger,k=a.radio.Event,l=a.InputDataSanitizer,m=b.context.ReporterHelper,n=b.clock.TrackingTimer,o=b.context.Timeline,p=b.context.TimelineItem,q=b.context.History,r=b.model.SessionDao,s=b.model.AdobeAnalyticsDao,t=b.model.AssetDao,u=b.model.ServiceProviderDao,v=b.model.UserDao,w=b.model.StreamDao,x=b.model.QoSDao,y=b.model.ChapterDao,z=b.context.Counters,A=b.event.ClockEvent,B=b.event.NetworkEvent,C=b.event.ApiEvent,D=b.event.ContextEvent,E=b.event.EventKeyName,F=b.model.EventDao,G=b.model.AdDao,H=c.Version,I=d.md5,J="sourceErrorSDK",K="error";h(e,i),h(e,j),e.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this.log("#destroy()"),this._uninstallEventListeners())},e.prototype._onApiConfig=function(a){var b=a.data;this.log("#_onApiConfig(, tracking_server="+b[E.TRACKING_SERVER]+", check_status_server="+b[E.CHECK_STATUS_SERVER]+", job_id="+b[E.JOB_ID]+", quietMode: "+b[E.QUIET_MODE]+")"),this._adobeAnalyticsData.reportSuiteId(this._channel.request(g.RSID)),this._adobeAnalyticsData.trackingServer(this._channel.request(g.TRACKING_SERVER)),this._adobeAnalyticsData.ssl(this._channel.request(g.USE_SSL)?1:0),this._userData.visitorId(this._channel.request(g.VISITOR_ID)),this._userData.analyticsVisitorId(this._channel.request(g.ANALYTICS_VISITOR_ID)),this._userData.marketingCloudVisitorId(this._channel.request(g.MARKETING_CLOUD_VISITOR_ID)),this._serviceProviderData.ovp(this._channel.request(g.OVP)),this._serviceProviderData.sdk(this._channel.request(g.SDK)),this._serviceProviderData.channel(this._channel.request(g.CHANNEL)),this._serviceProviderData.libVersion(H.getVersion()),this._serviceProviderData.apiLevel(H.getApiLevel()),this._channel.trigger(new A(A.CLOCK_CHECK_STATUS_ENABLE))},e.prototype._onApiVideoLoad=function(){this._resetInternalState();var a=this._channel.request(g.VIDEO_INFO);if(this._inputDataSanitizer.sanitizeVideoInfo(a)){this.log("#_onApiVideoLoad(id="+a.id+", length="+a.length+", type="+a.streamType+", player_name="+a.playerName+")"),this._activeAssetId=a.id,this._serviceProviderData.playerName(a.playerName),this._assetData.videoId(this._activeAssetId),this._assetData.duration(a.length),this._assetData.type(a.streamType),this._assetData.publisher(this._channel.request(g.PUBLISHER)),this._videoAssetType=this._assetData.type(),this._streamData.name(a.name||this._activeAssetId),this._sessionData.sessionId(f()),this._counters.resetCounters(this._activeAssetId,this._videoAssetType),this._updateQoSInfo();var b=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_LOAD,0);b.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(b),this._history.updateWith(b);var c=this._channel.request(n.TRACKING_TIMER_INTERVAL),d=this._reporterHelper.createReportForItem(b,c),e={};e[E.REPORT]=d,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,e)),this._isTrackingSessionActive=!0}},e.prototype._onApiVideoUnload=function(){if(!this._isTrackingSessionActive)return void this.warn("#_onApiVideoUnload() > No active tracking session.");this.log("#_onApiVideoUnload()");var a=this._channel.request(n.TRACKING_TIMER_INTERVAL),b=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_UNLOAD,0);b.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(b),this._history.updateWith(b);var c=this._reporterHelper.createReportForItem(b,a),d={};d[E.REPORT]=c,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,d)),this._isTrackingSessionActive=!1},e.prototype._onApiVideoStart=function(){if(this._checkCall("_onApiVideoStart")){this.log("#_onApiVideoStart()");var a=this._getPlayhead();if(null!=a&&!isNaN(a)){var b={};b[E.RESET]=!0,this._channel.trigger(new A(A.CLOCK_TRACKING_ENABLE,b)),this._updateQoSInfo();var c=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_START,a);c.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(c),this._placeItemOnTimeline(c)}}},e.prototype._onApiVideoComplete=function(){if(this._checkCall("_onApiVideoComplete")){this.log("#_onApiVideoComplete()"),this._updateQoSInfo();var a=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_COMPLETE,this._assetData.duration());a.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(a),this._placeItemOnTimeline(a);var b=this._channel.request(n.TRACKING_TIMER_INTERVAL),c=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_PAUSE,0);c.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(c),this._placeItemOnTimeline(c);var d=this._reporterHelper.createReportForQuantum(b,!0),e={};e[E.REPORT]=d,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,e)),e={},e[E.RESET]=!0,this._channel.trigger(new A(A.CLOCK_TRACKING_DISABLE,e)),this._isVideoComplete=!0}},e.prototype._onApiPlay=function(){if(this._checkCall("_onApiPlay")){this.log("#_onApiPlay()");var a=this._getPlayhead();if(null!=a&&!isNaN(a)){this._channel.trigger(new A(A.CLOCK_TRACKING_ENABLE)),this._updateQoSInfo();var b=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_PLAY,a);b.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(b),this._placeItemOnTimeline(b)}}},e.prototype._onApiPause=function(){if(this._checkCall("_onApiPause")){this.log("#_onApiPause()");var a=this._getPlayhead();if(null!=a&&!isNaN(a)){this._updateQoSInfo();var b=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_PAUSE,a);b.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(b),this._placeItemOnTimeline(b),this._channel.trigger(new A(A.CLOCK_TRACKING_DISABLE))}}},e.prototype._onApiBufferStart=function(){if(this._checkCall("_onApiBufferStart")){this.log("#_onApiBufferStart()");var a=this._getPlayhead();if(null!=a&&!isNaN(a)){this._updateQoSInfo();var b=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_BUFFER,a);b.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(b),this._placeItemOnTimeline(b)}}},e.prototype._onApiSeekStart=function(){this._checkCall("_onApiSeekStart")&&(this.log("#_onApiSeekStart()"),this._stashedAdData=this._assetData.adData(),this._stashedChapterData=this._assetData.chapterData(),this._assetData.adData(null),this._assetData.type(this._videoAssetType),this._activeAssetId=this._assetData.videoId(),this._assetData.chapterData(null))},e.prototype._onApiSeekComplete=function(){if(this._checkCall("_onApiSeekComplete")){var a=this._channel.request(g.AD_BREAK_INFO);if(this._inputDataSanitizer.sanitizeAdBreakInfo(a,!0)){var b=this._channel.request(g.AD_INFO);if(this._inputDataSanitizer.sanitizeAdInfo(b,!0)){var c=this._channel.request(g.CHAPTER_INFO);if(this._inputDataSanitizer.sanitizeChapterInfo(c,!0)){if(a&&b){var d=I(this._assetData.videoId())+"_"+a.position;if(this._stashedAdData&&this._stashedAdData.podId()==d&&parseInt(this._stashedAdData.podPosition(),10)==b.position)this._assetData.adData(this._stashedAdData),this._activeAssetId=this._stashedAdData.adId();else if(!this._assetData.adData()){this._activeAssetId=b.id;var e=new G;e.adId(this._activeAssetId),e.length(b.length),e.resolver(a.playerName),e.podId(d),e.podSecond(a.startTime),e.podPosition(b.position+""),e.sid(f()),this._assetData.adData(e)}this._assetData.type(t.TYPE_AD)}else this._assetData.adData(null),this._assetData.type(this._videoAssetType),this._activeAssetId=this._assetData.videoId();if(c){if(this._stashedChapterData&&c.position==this._stashedChapterData.position())this._assetData.chapterData(this._stashedChapterData);else if(!this._assetData.chapterData()){var h=new y;h.id(I(this._assetData.videoId())+"_"+c.position),h.name(c.name),h.length(c.length),h.position(c.position),h.offset(c.startTime),h.sid(f()),this._assetData.chapterData(h)}}else this._assetData.chapterData(null);this._stashedAdData=null,this._stashedChapterData=null}}}}},e.prototype._onApiAdStart=function(){if(this._checkCall("_onApiAdStart")){var a=this._channel.request(g.AD_BREAK_INFO);if(this._inputDataSanitizer.sanitizeAdBreakInfo(a,!1)){var b=this._channel.request(g.VIDEO_INFO);if(this._inputDataSanitizer.sanitizeVideoInfo(b)){(null==a.startTime||isNaN(a.startTime))&&(a.startTime=b.playhead);var c=this._channel.request(g.AD_INFO);if(this._inputDataSanitizer.sanitizeAdInfo(c,!1)){this.log("#_onApiAdStart(id="+c.id+", length="+c.length+", player_name="+a.playerName+", parent_name="+this._assetData.videoId()+", pod_pos="+c.position+", pod_offset="+a.startTime+")"),this._activeAssetId=c.id;var d=new G;d.adId(this._activeAssetId),d.length(c.length),d.resolver(a.playerName),d.podId(I(this._assetData.videoId())+"_"+a.position),d.podSecond(a.startTime),d.podPosition(c.position+""),d.sid(f()),this._assetData.adData(d),this._assetData.type(t.TYPE_AD),this._counters.resetCounters(this._activeAssetId,t.TYPE_AD),this._updateQoSInfo();var e=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_START,b.playhead);e.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(e),this._placeItemOnTimeline(e)}}}}},e.prototype._onApiAdComplete=function(){if(this._checkCall("_onApiAdComplete")){if(this.log("#_onApiAdComplete()"),this._assetData.type()!=t.TYPE_AD)return void this.warn("#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");var a=this._getPlayhead();if(null!=a&&!isNaN(a)){this._updateQoSInfo();var b=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_PLAY,a);b.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(b),this._placeItemOnTimeline(b);var c=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_COMPLETE,a);c.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(c),this._placeItemOnTimeline(c),this._assetData.adData(null),this._assetData.type(this._videoAssetType),this._activeAssetId=this._assetData.videoId()}}},e.prototype._onApiChapterStart=function(){if(this._checkCall("_onApiChapterStart")){var a=this._channel.request(g.CHAPTER_INFO);if(this._inputDataSanitizer.sanitizeChapterInfo(a,!1)){this.log("#_onApiChapterStart(name="+a.name+", length="+a.length+", position="+a.position+", chapter_offset="+a.startTime+")");var b=this._getPlayhead();if(null!=b&&!isNaN(b)){var c=new y;if(c.id(I(this._assetData.videoId())+"_"+a.position),c.name(a.name),c.length(a.length),c.position(a.position),c.offset(a.startTime),c.sid(f()),this._assetData.chapterData(c),this._updateQoSInfo(),this._timeline.getLast().eventType==F.EVENT_TYPE_PLAY){var d=new p(this._assetData,this._streamData,this._qosData,this._timeline.getLast().eventType,b);d.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(d),this._placeItemOnTimeline(d)}var e=this._channel.request(n.TRACKING_TIMER_INTERVAL),h=new t(this._assetData);h.adData(null),h.type(this._videoAssetType);var i=new p(h,this._streamData,this._qosData,F.EVENT_TYPE_CHAPTER_START,b);i.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(i),this._history.updateWith(i);var j=this._reporterHelper.createReportForItem(i,e),k={};k[E.REPORT]=j,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,k))}}}},e.prototype._onApiChapterComplete=function(){if(this._checkCall("_onApiChapterComplete")){if(this.log("#_onApiChapterComplete()"),!this._assetData.chapterData())return void this.warn("#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");var a=this._getPlayhead();if(null!=a&&!isNaN(a)){var b=this._channel.request(n.TRACKING_TIMER_INTERVAL),c=new t(this._assetData);c.adData(null),c.type(this._videoAssetType),this._updateQoSInfo();var d=new p(c,this._streamData,this._qosData,F.EVENT_TYPE_CHAPTER_COMPLETE,a);d.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(d),this._history.updateWith(d);var e=this._reporterHelper.createReportForItem(d,b),f={};if(f[E.REPORT]=e,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,f)),this._assetData.chapterData(null),this._timeline.getLast().eventType==F.EVENT_TYPE_PLAY){var g=new p(this._assetData,this._streamData,this._qosData,this._timeline.getLast().eventType,a);g.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(g),this._placeItemOnTimeline(g)}}}},e.prototype._onApiBitrateChange=function(){if(this._checkCall("_onApiBitrateChange")){this.log("#_onApiBitrateChange()");var a=this._getPlayhead();if(null!=a&&!isNaN(a)){var b=this._channel.request(n.TRACKING_TIMER_INTERVAL);this._updateQoSInfo();var c=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_BITRATE_CHANGE,a);
c.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(c),this._history.updateWith(c);var d=this._reporterHelper.createReportForItem(c,b),e={};e[E.REPORT]=d,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,e))}}},e.prototype._onApiTrackError=function(a){if(this._checkCall("_onApiTrackError")){var b=this._getPlayhead();if(null!=b&&!isNaN(b)){var c=a.data;if(this.log("#_onApiTrackError(source="+c[E.SOURCE]+", err_id="+c[E.ERROR_ID]+")"),this._trackExternalErrors||c[E.SOURCE]===J){var d=this._channel.request(n.TRACKING_TIMER_INTERVAL);this._updateQoSInfo();var e=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_ERROR,b);e.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(e),this._history.updateWith(e);var f=this._reporterHelper.createReportForItem(e,d),g=f.reportEntries[0];g.eventData.id(c[E.ERROR_ID]),g.eventData.source(c[E.SOURCE]);var h={};h[E.REPORT]=f,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,h))}}}},e.prototype._onApiTrackInternalError=function(a){var b=a.data;this.log("#_onApiTrackInternalError(source="+b[E.SOURCE]+", err_id="+b[E.ERROR_ID]+")"),this._updateQoSInfo();var c=new p(this._assetData,this._streamData,this._qosData,F.EVENT_TYPE_ERROR,0),d=this._channel.request(n.TRACKING_TIMER_INTERVAL),e=this._reporterHelper.createReportForItem(c,d),f=e.reportEntries[0];f.eventData.id(b[E.ERROR_ID]),f.eventData.source(b[E.SOURCE]);var g={};g[E.REPORT]=e,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,g))},e.prototype._onClockTrackingTick=function(a){if(this._checkCall("_onClockTrackingTick")){var b=a.data[E.TIMER_INTERVAL];this.log("#_onClockTrackingTick(interval="+b+")");var c=this._getPlayhead();if(null!=c&&!isNaN(c)){var d=new t(this._assetData);d.adData(null),d.type(this._videoAssetType),this._updateQoSInfo();var e=new p(d,this._streamData,this._qosData,F.EVENT_TYPE_ACTIVE,c);e.prevItemOfSameType=this._history.getPreviousItemOfSameTypeWith(e),this.log("#_onClockTrackingTick() > Adding the ACTIVE event on the time-line."),this._timeline.addActiveItem(e),this._history.updateWith(e);var f=this._reporterHelper.createReportForQuantum(b,!1),g={};g[E.REPORT]=f,this._channel.trigger(new D(D.CONTEXT_DATA_AVAILABLE,g))}}},e.prototype._onNetworkCheckStatusComplete=function(a){this._trackExternalErrors=a.data[E.TRACK_EXTERNAL_ERRORS],this.log("#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},e.prototype._installEventListeners=function(){this._channel.on(C.API_CONFIG,this._onApiConfig,this),this._channel.on(C.API_VIDEO_LOAD,this._onApiVideoLoad,this),this._channel.on(C.API_VIDEO_UNLOAD,this._onApiVideoUnload,this),this._channel.on(C.API_VIDEO_START,this._onApiVideoStart,this),this._channel.on(C.API_VIDEO_COMPLETE,this._onApiVideoComplete,this),this._channel.on(C.API_AD_START,this._onApiAdStart,this),this._channel.on(C.API_AD_COMPLETE,this._onApiAdComplete,this),this._channel.on(C.API_PLAY,this._onApiPlay,this),this._channel.on(C.API_PAUSE,this._onApiPause,this),this._channel.on(C.API_BUFFER_START,this._onApiBufferStart,this),this._channel.on(C.API_SEEK_START,this._onApiSeekStart,this),this._channel.on(C.API_SEEK_COMPLETE,this._onApiSeekComplete,this),this._channel.on(C.API_CHAPTER_START,this._onApiChapterStart,this),this._channel.on(C.API_CHAPTER_COMPLETE,this._onApiChapterComplete,this),this._channel.on(C.API_BITRATE_CHANGE,this._onApiBitrateChange,this),this._channel.on(C.API_TRACK_ERROR,this._onApiTrackError,this),this._channel.on(C.API_TRACK_INTERNAL_ERROR,this._onApiTrackInternalError,this),this._channel.on(A.CLOCK_TRACKING_TICK,this._onClockTrackingTick,this),this._channel.on(B.NETWORK_CHECK_STATUS_COMPLETE,this._onNetworkCheckStatusComplete,this)},e.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},e.prototype._resetInternalState=function(){this.log("#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._videoAssetType=null,this._counters=new z,this._history=new q,this._timeline=new o(this),this._streamData=new w,this._qosData=new x,this._sessionData=new r,this._assetData=new t,this._stashedAdData=null,this._stashedChapterData=null},e.prototype._placeItemOnTimeline=function(a){this.log("#_placeItemOnTimeline(type="+a.eventType+")"),this._timeline.addItem(a),this._history.updateWith(a)},e.prototype._getPlayhead=function(){var a=null,b=this._channel.request(g.VIDEO_INFO);return this._inputDataSanitizer.sanitizeVideoInfo(b)&&(a=b.playhead),a},e.prototype._updateQoSInfo=function(){var a=this._channel.request(g.QOS_INFO);this._qosData.bitrate(a&&!isNaN(a.bitrate)?a.bitrate:0),this._qosData.fps(a&&!isNaN(a.fps)?a.fps:0),this._qosData.droppedFrames(a&&!isNaN(a.droppedFrames)?a.droppedFrames:0)},e.prototype._checkCall=function(a){return this._isTrackingSessionActive?this._isVideoComplete?(this.warn("#"+a+"() > The video content already completed."),!1):!0:(this.warn("#"+a+"() > No active tracking session."),!1)},e.prototype._onInvalidInputData=function(a){this._channel.trigger(new k(K,a))},b.context.Context=e}(d,f,c,b),function(a){"use strict";function b(a,b){this.quietMode=!1,this.trackingServer=a,this.jobId=b}a.HeartbeatPluginConfig=b}(f),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,q),this._radio=new e;var a=this._channel=this._radio.channel(s);this._workQueue=new g(!0),this._clock=null,this._context=null,this._network=null,this._isConfigured=!1,this._initSubmodules(),a.on(o.ERROR,this._onError,this),a.on(c.VIDEO_UNLOADED,this._onVideoUnloaded,this),a.reply(c.RSID,function(){return this._pluginManager.request(v,c.RSID)},this),a.reply(c.TRACKING_SERVER,function(){return this._pluginManager.request(v,c.TRACKING_SERVER)},this),a.reply(c.USE_SSL,function(){return this._pluginManager.request(v,c.USE_SSL)},this),a.reply(c.VISITOR_ID,function(){return this._pluginManager.request(v,c.VISITOR_ID)},this),a.reply(c.ANALYTICS_VISITOR_ID,function(){return this._pluginManager.request(v,c.ANALYTICS_VISITOR_ID)},this),a.reply(c.MARKETING_CLOUD_VISITOR_ID,function(){return this._pluginManager.request(v,c.MARKETING_CLOUD_VISITOR_ID)},this),a.reply(c.ERROR_INFO,function(){return this._pluginManager.request(w,c.ERROR_INFO)},this),a.reply(c.OVP,function(){return this._pluginManager.request(u,c.OVP)},this),a.reply(c.SDK,function(){return this._pluginManager.request(u,c.SDK)},this),a.reply(c.CHANNEL,function(){return this._pluginManager.request(u,c.CHANNEL)},this),a.reply(c.PUBLISHER,function(){return this._pluginManager.request(u,c.PUBLISHER)},this),a.reply(c.VIDEO_INFO,function(){return this._pluginManager.request(t,c.VIDEO_INFO)},this),a.reply(c.AD_BREAK_INFO,function(){return this._pluginManager.request(t,c.AD_BREAK_INFO)},this),a.reply(c.AD_INFO,function(){return this._pluginManager.request(t,c.AD_INFO)},this),a.reply(c.CHAPTER_INFO,function(){return this._pluginManager.request(t,c.CHAPTER_INFO)},this),a.reply(c.QOS_INFO,function(){return this._pluginManager.request(t,c.QOS_INFO)},this)}var d=a.event.EventKeyName,e=b.radio.Radio,f=b.radio.Channel,g=b.radio.CommandQueue,h=b.radio.Command,i=a.event.ApiEvent,j=a.event.ClockEvent,k=a.clock.Clock,l=a.network.Network,m=a.context.Context,n=a.model.QuerystringSerializer,o=b.plugin.PluginManager,p=b.plugin.BasePlugin;b.extend(c,p);var q="heartbeat",r="sourceErrorHeartbeat",s="heartbeat",t="player",u="config",v="adobe-analytics",w=p.STATE_PLUGIN;c.VIDEO_LOAD="video_load",c.VIDEO_UNLOAD="video_unload",c.VIDEO_UNLOADED="video_unloaded",c.VIDEO_START="video_start",c.VIDEO_COMPLETE="video_complete",c.PLAY="play",c.PAUSE="pause",c.AD_START="ad_start",c.AD_COMPLETE="ad_complete",c.BUFFER_START="buffer_start",c.BUFFER_COMPLETE="buffer_complete",c.SEEK_START="seek_start",c.SEEK_COMPLETE="seek_complete",c.CHAPTER_START="chapter_start",c.CHAPTER_COMPLETE="chapter_complete",c.BITRATE_CHANGE="bitrate_change",c.TRACK_ERROR="track_error",c.VIDEO_INFO="video_info",c.AD_BREAK_INFO="ad_break_info",c.AD_INFO="ad_info",c.CHAPTER_INFO="chapter_info",c.QOS_INFO="qos_info",c.RSID="rsid",c.TRACKING_SERVER="tracking_server",c.USE_SSL="use_ssl",c.VISITOR_ID="visitor_id",c.ANALYTICS_VISITOR_ID="analytics_visitor_id",c.MARKETING_CLOUD_VISITOR_ID="marketing_cloud_visitor_id",c.OVP="ovp",c.SDK="sdk",c.CHANNEL="channel",c.PUBLISHER="publisher",c.prototype.configure=function(a){this.log("#configure({, trackingServer="+a.trackingServer+", jobId="+a.jobId+", quietMode="+a.quietMode+"})");var b=a.trackingServer+"/settings/",c={};c[d.TRACKING_SERVER]=a.trackingServer,c[d.CHECK_STATUS_SERVER]=b,c[d.JOB_ID]=a.jobId,c[d.QUIET_MODE]=a.quietMode,this._enqueueEvent(new i(i.API_CONFIG,c)),this._enqueueEvent(new j(j.CLOCK_CHECK_STATUS_GET_SETTINGS)),this._isConfigured=!0},c.prototype.bootstrap=function(a){c.__super__.bootstrap.call(this,a);var b=this._eventMap={};b[c.VIDEO_LOAD]=i.API_VIDEO_LOAD,b[c.VIDEO_UNLOAD]=i.API_VIDEO_UNLOAD,b[c.VIDEO_START]=i.API_VIDEO_START,b[c.VIDEO_COMPLETE]=i.API_VIDEO_COMPLETE,b[c.PLAY]=i.API_PLAY,b[c.PAUSE]=i.API_PAUSE,b[c.AD_START]=i.API_AD_START,b[c.AD_COMPLETE]=i.API_AD_COMPLETE,b[c.BUFFER_START]=i.API_BUFFER_START,b[c.SEEK_START]=i.API_SEEK_START,b[c.SEEK_COMPLETE]=i.API_SEEK_COMPLETE,b[c.CHAPTER_START]=i.API_CHAPTER_START,b[c.CHAPTER_COMPLETE]=i.API_CHAPTER_COMPLETE,b[c.BITRATE_CHANGE]=i.API_BITRATE_CHANGE,b[c.TRACK_ERROR]=i.API_TRACK_ERROR;var d=this._customActions={};d[c.VIDEO_LOAD]=this._onVideoLoad,d[c.VIDEO_UNLOAD]=this._onVideoUnload,d[c.PLAY]=this._onPlay,d[c.PAUSE]=this._onPause,d[c.AD_START]=this._onAdStart,d[c.AD_COMPLETE]=this._onAdComplete,d[c.BUFFER_START]=this._onBufferStart,d[c.BUFFER_COMPLETE]=this._onBufferComplete,d[c.SEEK_START]=this._onSeekStart,d[c.SEEK_COMPLETE]=this._onSeekComplete,d[c.TRACK_ERROR]=this._onTrackError,this._pluginManager.on(t,f.WILDCARD,this._onPlayerEvent,this),this._resetInternalState()},c.prototype.setup=function(){this._pluginManager.pluginExists(v)?this._pluginManager.isPluginInitialized(v)?this._completeInitialization():this._pluginManager.on(v,p.INITIALIZED,this._completeInitialization,this):this._completeInitialization()},c.prototype._teardown=function(){this.log("#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._network.destroy(),this._workQueue.cancelAllCommands()},c.prototype._onPlayerEvent=function(a){if(this._canProcess()){var b=a.type.split(":"),c=b[1],d=a.data;this.log("#_onPlayerEvent() > Tracking event: "+c.toUpperCase()),this._retriggerEvent(c,d)}},c.prototype._retriggerEvent=function(a,b){var c=this._eventMap[a],d=this._customActions[a];if(c||"function"==typeof d){var e=this,f=function(a){return e._enqueueEvent(new i(c,a))};"function"==typeof d?d.call(this,f,b):f(b)}},c.prototype._onVideoLoad=function(a){this._isTrackingSessionActive&&this._enqueueEvent(new i(i.API_VIDEO_UNLOAD)),this._resetInternalState(),a(),this._isTrackingSessionActive=!0},c.prototype._onVideoUnload=function(a){a(),this._isTrackingSessionActive=!1},c.prototype._onPlay=function(){this._isPaused=!1,this._resumePlaybackIfPossible()},c.prototype._onPause=function(a){a(),this._isPaused=!0},c.prototype._onAdStart=function(a){a(),this._resumePlaybackIfPossible()},c.prototype._onAdComplete=function(a){a(),this._resumePlaybackIfPossible()},c.prototype._onBufferStart=function(a){a(),this._isBuffering=!0},c.prototype._onBufferComplete=function(){this._isBuffering=!1,this._resumePlaybackIfPossible()},c.prototype._onSeekStart=function(a){a(),this._enqueueEvent(new i(i.API_PAUSE)),this._isSeeking=!0},c.prototype._onSeekComplete=function(a){a(),this._isSeeking=!1,this._resumePlaybackIfPossible()},c.prototype._onTrackError=function(a,b){this.log("#_onTrackError(source="+b[d.SOURCE]+", errorId="+b[d.ERROR_ID]+")."),a(b)},c.prototype._onError=function(a){var b=a.data,c={};c[d.SOURCE]=r,c[d.ERROR_ID]=b.message+"|"+b.details,this._channel.trigger(new i(i.API_TRACK_INTERNAL_ERROR,c)),c={},c[d.RESET]=!0,this._channel.trigger(new j(j.CLOCK_TRACKING_DISABLE,c)),this._workQueue.cancelAllCommands(),this._trigger(o.ERROR,a.data)},c.prototype._onVideoUnloaded=function(){this._trigger(c.VIDEO_UNLOADED)},c.prototype._initSubmodules=function(){this._context=new m(this._channel),this._clock=new k(this._channel),this._network=new l(this._channel,new n)},c.prototype._canTrack=function(){return this._isConfigured||this.warn("_canTrack() > Unable to track! Is configured: "+this._isConfigured),this._isConfigured},c.prototype._enqueueEvent=function(a){this.log("#_enqueueEvent() : "+a.type),this._workQueue.addCommand(new h(function(){this._canTrack()&&this._channel.trigger(a)},this))},c.prototype._resetInternalState=function(){this._isTrackingSessionActive=!1,this._isPaused=!1,this._isSeeking=!1,this._isBuffering=!1},c.prototype._resumePlaybackIfPossible=function(){this._isPaused||this._isSeeking||this._isBuffering||this._enqueueEvent(new i(i.API_PLAY))},c.prototype._completeInitialization=function(){var a=this._pluginManager.request(w,p.ERROR_INFO);return a?(this.warn("#_completeInitialization() > Unable to track: in ERROR state."),void this._workQueue.cancelAllCommands()):(this._workQueue.flush(),void c.__super__.setup.call(this))},a.HeartbeatPlugin=c}(f,d),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,e),this._config=null;var a={};a.publisher="publisher",a.channel="channel",a.ovp="ovp",a.sdk="sdk",a.is_primetime="__primetime",this._dataResolver=function(b){return this._config?this._config[a[b]]:null}}var d=b.plugin.BasePlugin;b.extend(c,d);var e="config";c.prototype.configure=function(a){this._config=a,c.__super__.setup.call(this)},c.prototype.setup=function(){},a.ConfigPlugin=c}(e,d),function(a,b){"use strict";function c(){c.__super__.constructor.call(this,f)}var d=b.plugin.BasePlugin,e=b.plugin.PluginManager;b.extend(c,d);var f="state";c.prototype.bootstrap=function(a){c.__super__.bootstrap.call(this,a),this._pluginManager.on(e.ALL_PLUGINS,e.ERROR,this._onError,this),this._dataResolver[d.ERROR_INFO]=function(){return this._isEnabled?this._errorInfo:null}},c.prototype._onError=function(a){this._errorInfo=a.data,this.warn("#_onError() > "+this._errorInfo.message+": "+this._errorInfo.details)},a.StatePlugin=c}(e,d),function(a,b,c){"use strict";function d(a){d.__super__.constructor.call(this,h),this._playerDelegate=a}var e=c.event.EventKeyName,f=b.plugin.BasePlugin,g=b.plugin.PluginManager;b.extend(d,f);var h="player",i="sourceErrorExternal",j="sourceErrorSDK",k="heartbeat";d.VIDEO_LOAD="video_load",d.VIDEO_UNLOAD="video_unload",d.VIDEO_UNLOADED="video_unloaded",d.VIDEO_START="video_start",d.VIDEO_COMPLETE="video_complete",d.PLAY="play",d.PAUSE="pause",d.AD_START="ad_start",d.AD_COMPLETE="ad_complete",d.BUFFER_START="buffer_start",d.BUFFER_COMPLETE="buffer_complete",d.SEEK_START="seek_start",d.SEEK_COMPLETE="seek_complete",d.CHAPTER_START="chapter_start",d.CHAPTER_COMPLETE="chapter_complete",d.BITRATE_CHANGE="bitrate_change",d.TRACK_ERROR="track_error";var l="video_info",m="ad_break_info",n="ad_info",o="chapter_info",p="qos_info";d.prototype.setup=function(){this._pluginManager.on(k,d.VIDEO_UNLOADED,this._onVideoUnloaded,this),this._pluginManager.on(g.ALL_PLUGINS,g.ERROR,this._onError,this),this._checkPlayerDelegate();var a={};a[l]=this._playerDelegate.getVideoInfo,a[n]=this._playerDelegate.getAdInfo,a[m]=this._playerDelegate.getAdBreakInfo,a[o]=this._playerDelegate.getChapterInfo,a[p]=this._playerDelegate.getQoSInfo,this._dataResolver=function(b){return this._isEnabled?a[b].call(this._playerDelegate):null},d.__super__.setup.call(this)},d.prototype.trackVideoLoad=function(){this._canProcess()&&(this._trigger(d.VIDEO_LOAD),this._trigger(d.VIDEO_START))},d.prototype.trackVideoUnload=function(){this._canProcess()&&this._trigger(d.VIDEO_UNLOAD)},d.prototype.trackPlay=function(){this._canProcess()&&this._trigger(d.PLAY)},d.prototype.trackPause=function(){this._canProcess()&&this._trigger(d.PAUSE)},d.prototype.trackBufferStart=function(){this._canProcess()&&this._trigger(d.BUFFER_START)},d.prototype.trackBufferComplete=function(){this._canProcess()&&this._trigger(d.BUFFER_COMPLETE)},d.prototype.trackSeekStart=function(){this._canProcess()&&this._trigger(d.SEEK_START)},d.prototype.trackSeekComplete=function(){this._canProcess()&&this._trigger(d.SEEK_COMPLETE)},d.prototype.trackComplete=function(){this._canProcess()&&this._trigger(d.VIDEO_COMPLETE)},d.prototype.trackChapterStart=function(){this._canProcess()&&this._trigger(d.CHAPTER_START)},d.prototype.trackChapterComplete=function(){this._canProcess()&&this._trigger(d.CHAPTER_COMPLETE)},d.prototype.trackAdStart=function(){this._canProcess()&&this._trigger(d.AD_START)},d.prototype.trackAdComplete=function(){this._canProcess()&&this._trigger(d.AD_COMPLETE)},d.prototype.trackBitrateChange=function(){this._canProcess()&&this._trigger(d.BITRATE_CHANGE)},d.prototype.trackVideoPlayerError=function(a){var b={};b[e.SOURCE]=j,b[e.ERROR_ID]=a,this._trigger(d.TRACK_ERROR,b)},d.prototype.trackApplicationError=function(a){var b={};b[e.SOURCE]=i,b[e.ERROR_ID]=a,this._trigger(d.TRACK_ERROR,b)},d.prototype._onVideoUnloaded=function(){this._canProcess()&&this._playerDelegate.onVideoUnloaded()},d.prototype._onError=function(a){if(this._canProcess()){var b=this;window.setTimeout(function(){b._playerDelegate.onError(a.data)},100)}},d.prototype._checkPlayerDelegate=function(){this._playerDelegate||this.error("PlayerDelegate cannot be null."),"function"!=typeof this._playerDelegate.getVideoInfo&&this.error("PlayerDelegate must define the getVideoInfo method."),"function"!=typeof this._playerDelegate.getAdBreakInfo&&this.error("PlayerDelegate must define the getAdBreakInfo method."),"function"!=typeof this._playerDelegate.getAdInfo&&this.error("PlayerDelegate must define the getAdInfo method."),"function"!=typeof this._playerDelegate.getChapterInfo&&this.error("PlayerDelegate must define the getChapterInfo method."),"function"!=typeof this._playerDelegate.getQoSInfo&&this.error("PlayerDelegate must define the getQoSInfo method.")},a.PlayerPlugin=d}(e,d,f),function(a,b,c,d,e){"use strict";function f(a,b){this.enableLogging("[video-heartbeat::VideoHeartbeat] > "),this._pluginManager=new g,this._statePlugin=new h,this._pluginManager.addPlugin(this._statePlugin),this._configPlugin=new i,this._pluginManager.addPlugin(this._configPlugin),this._playerPlugin=new j(a),this._pluginManager.addPlugin(this._playerPlugin),this._heartbeatPlugin=new k,this._pluginManager.addPlugin(this._heartbeatPlugin),b=b||[];for(var c=0;c<b.length;c++)this._pluginManager.addPlugin(b[c]);this._pluginManager.setupPlugins(),this._isDestroyed=!1,this._isConfigured=!1}var g=a.plugin.PluginManager,h=e.StatePlugin,i=e.ConfigPlugin,j=e.PlayerPlugin,k=c.HeartbeatPlugin,l=c.HeartbeatPluginConfig,m="primetime",n="state",o="error_info";a.mixin(f,a.logger),f.prototype.configure=function(b){if(!b)return void this.error("Configuration object cannot be NULL");a.LOGGING_ENABLED=!!b.debugLogging,b.__primetime&&(b.ovp=m),b.__psdkVersion&&(b.sdk=b.__psdkVersion),this._configPlugin.configure(b);var c=new l(b.trackingServer,b.jobId);c.quietMode=b.quietMode,this._heartbeatPlugin.configure(c),this._isConfigured=!0},f.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)},f.prototype.trackVideoLoad=function(){return this._isConfigured?this._isDestroyed?void this.warn("#trackVideoLoad() > Unable to track: instance previously destroyed."):(this.log("#trackVideoLoad() > Tracking a VIDEO_LOAD event."),void this._playerPlugin.trackVideoLoad()):void this.warn("#trackVideoLoad() > Unable to track: not configured.")},f.prototype.trackVideoUnload=function(){this._checkCall("trackVideoUnload")&&(this.log("#trackVideoUnload() > Tracking a VIDEO_UNLOAD event."),this._playerPlugin.trackVideoUnload())},f.prototype.trackPlay=function(){this._checkCall("trackPlay")&&(this.log("#trackPlay() > Tracking a PLAY event."),this._playerPlugin.trackPlay())},f.prototype.trackPause=function(){this._checkCall("trackPause")&&(this.log("#trackPause() > Tracking a PAUSE event."),this._playerPlugin.trackPause())},f.prototype.trackBufferStart=function(){this._checkCall("trackBufferStart")&&(this.log("#trackBufferStart() > Tracking a BUFFER_START event."),this._playerPlugin.trackBufferStart())},f.prototype.trackBufferComplete=function(){this._checkCall("trackBufferComplete")&&(this.log("#trackBufferComplete() > Tracking a BUFFER_COMPLETE event."),this._playerPlugin.trackBufferComplete())},f.prototype.trackSeekStart=function(){this._checkCall("trackSeekStart")&&(this.log("#trackSeekStart() > Tracking a SEEK_START event."),this._playerPlugin.trackSeekStart())},f.prototype.trackSeekComplete=function(){this._checkCall("trackSeekComplete")&&(this.log("#trackSeekComplete() > Tracking a SEEK_COMPLETE event."),this._playerPlugin.trackSeekComplete())},f.prototype.trackComplete=function(){this._checkCall("trackComplete")&&(this.log("#trackComplete() > Tracking a COMPLETE event."),this._playerPlugin.trackComplete())},f.prototype.trackAdStart=function(){this._checkCall("trackAdStart")&&(this.log("#trackAdStart() > Tracking an AD_START event."),this._playerPlugin.trackAdStart())},f.prototype.trackAdComplete=function(){this._checkCall("trackAdComplete")&&(this.log("#trackAdComplete() > Tracking an AD_COMPLETE event."),this._playerPlugin.trackAdComplete())},f.prototype.trackChapterStart=function(){this._checkCall("trackChapterStart")&&(this.log("#trackChapterStart() > Tracking a CHAPTER_START event."),this._playerPlugin.trackChapterStart())},f.prototype.trackChapterComplete=function(){this._checkCall("trackChapterComplete")&&(this.log("#trackChapterComplete() > Tracking a CHAPTER_COMPLETE event."),this._playerPlugin.trackChapterComplete())},f.prototype.trackBitrateChange=function(){this._checkCall("trackBitrateChange")&&this._playerPlugin.trackBitrateChange()},f.prototype.trackVideoPlayerError=function(a){this._checkCall("trackVideoPlayerError")&&(this.log("#trackVideoPlayerError(errorId="+a+")."),this._playerPlugin.trackVideoPlayerError(a))},f.prototype.trackApplicationError=function(a){this._checkCall("trackApplicationError")&&(this.log("#trackApplicationError(errorId="+a+")."),this._playerPlugin.trackApplicationError(a))},f.prototype._checkCall=function(a){var b=this._pluginManager.request(n,o);return b?(this.warn("#"+a+"() > Unable to track: in ERROR state. Message: "+b.message+" | Details: "+b.details),!1):this._isConfigured?this._isDestroyed?(this.warn("#"+a+"() > Unable to track: instance previously destroyed."),!1):!0:(this.warn("#"+a+"() > Unable to track: not configured."),!1)},f.prototype._resetInternalState=function(){this.log("#_resetInternalState() : Resetting internal state variables."),this._isTrackingSessionActive=!1,this._isPaused=!1,this._isSeeking=!1,this._isBuffering=!1},b.VideoHeartbeat=f}(d,c,f,b,e),a.ADB||(a.ADB={}),a.ADB.core||(a.ADB.core=d),a.ADB.va=c,a.ADB.va.plugins=e,a.ADB.va.utils=b}(this);